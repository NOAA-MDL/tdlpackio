<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.1.0"/>
    <title>tdlpackio API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>


            <h2>Contents</h2>
            <ul>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#download">Download</a></li>
  <li><a href="#requires">Requires</a></li>
  <li><a href="#install">Install</a></li>
  <li><a href="#tutorial">Tutorial</a>
  <ul>
    <li><a href="#div-idsection11-creatingopeningclosing-a-tdlpack-file"><div id='section1'>1) Creating/Opening/Closing a TDLPACK file.</a></li>
    <li><a href="#div-idsection22-reading-a-tdlpack-file"><div id='section2'>2) Reading a TDLPACK file.</a></li>
    <li><a href="#div-idsection33-tdlpackrecord-object"><div id='section3'>3) TdlpackRecord Object.</a></li>
    <li><a href="#div-idsection44-creating-a-tdlpack-station-record"><div id='section4'>4) Creating a TDLPACK Station Record.</a></li>
    <li><a href="#div-idsection55-creating-a-tdlpack-record"><div id='section5'>5) Creating a TDLPACK Record.</a></li>
    <li><a href="#div-idsection66-packingunpacking-a-tdlpack-record"><div id='section6'>6) Packing/Unpacking a TDLPACK Record.</a></li>
  </ul></li>
</ul>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="variable" href="#__version__">__version__</a>
            </li>
            <li>
                    <a class="class" href="#open">open</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#open.__init__">open</a>
                        </li>
                        <li>
                                <a class="variable" href="#open.mode">mode</a>
                        </li>
                        <li>
                                <a class="variable" href="#open.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#open.records">records</a>
                        </li>
                        <li>
                                <a class="function" href="#open.read">read</a>
                        </li>
                        <li>
                                <a class="function" href="#open.write">write</a>
                        </li>
                        <li>
                                <a class="function" href="#open.close">close</a>
                        </li>
                        <li>
                                <a class="function" href="#open.select">select</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#TdlpackRecord">TdlpackRecord</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#TdlpackStationRecord">TdlpackStationRecord</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#TdlpackStationRecord.__init__">TdlpackStationRecord</a>
                        </li>
                        <li>
                                <a class="variable" href="#TdlpackStationRecord.stations">stations</a>
                        </li>
                        <li>
                                <a class="variable" href="#TdlpackStationRecord.numberOfStations">numberOfStations</a>
                        </li>
                        <li>
                                <a class="variable" href="#TdlpackStationRecord.type">type</a>
                        </li>
                        <li>
                                <a class="function" href="#TdlpackStationRecord.pack">pack</a>
                        </li>
                        <li>
                                <a class="function" href="#TdlpackStationRecord.unpack">unpack</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#TdlpackTrailerRecord">TdlpackTrailerRecord</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#TdlpackTrailerRecord.type">type</a>
                        </li>
                        <li>
                                <a class="function" href="#TdlpackTrailerRecord.pack">pack</a>
                        </li>
                        <li>
                                <a class="function" href="#TdlpackTrailerRecord.unpack">unpack</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
tdlpackio    </h1>

                        <div class="docstring"><h1 id="introduction">Introduction</h1>

<p>tdlpackio is a Python package for reading and writing TDLPACK files by providing an interface
to the MOS-2000 (MOS2K) software system that is written in Fortran.  Contained in tdlpackio is
tdlpacklib which contains the necessary MOS2K subroutines to read and write TDLPACK sequential
or random-access files and to properly decode from the TDLPACK format and to encode data into
the TDLPACK format.</p>

<p>TDLPACK is a GRIB-like binary data format that is exclusive to MOS2K Fortran-based sofftware
system.  This software system was developed at the Meteorological Development Laboratory (MDL)
within NOAA/NWS and its primary purpose is to perform statistical post-processing of meteorological data.
TDLPACK format is based on the World Meteorological Organizations (WMO) GRIdded Binary (GRIB)
code, but has been tailored to MDL needs for data -- mainly the ability to store 1D (vector),
datasets such as station observations, along with 2D grids.</p>

<p>The TDLPACK data format are contained in two types of Fortran-based files; sequential or random-access.
Sequential files are variable length, record-based, and unformatted. Random-access files are fixed-length
and direct-access.  tdlpackio accommodates reading and writing of both types of TDLPACK files.</p>

<p>TDLPACK files can contain two other types of records: a station call letter record and trailer record.
A station call letter record can exist in both types of TDLPACK files and contains a stream of
alphanumeric characters (<code>CHARACTER(LEN=8)</code>).  A trailer record exists to signal the MOS2K system that
another station call letter record is about to be read or we have reached the end of the file (EOF).
A trailer record is not written to a random-access file.</p>

<p>For more information on the MOS-2000 software system and TDLPACK foremat, user is
referred to the official <a href="https://www.weather.gov/media/mdl/TDL_OfficeNote00-1.pdf">MOS-2000 documentation</a>.</p>

<p>In order for tdlpackio to read/write TDLPACK files, we need to compile the necessary MOS2K
Fortran source code into a shared object library.  This is handled by the setup process as the
Fortran source is compiled with f2py (included with Numpy).  The following are some important
items to note regarding MOS2K source files included:</p>

<ul>
<li>Several Fortran 90+ source files have been created to better interface to MOS2K Fortran 77 code.</li>
<li>The only modification made to MOS2K source files is changing the filename variable, <code>CFILX</code> from
<code>CHARACTER*60</code> to <code>CHARACTER*1024</code> in the appropropriate subroutines where random-access file IO
occurs.</li>
</ul>

<h1 id="download">Download</h1>

<ul>
<li>Latest code from <a href="https://github.com/eengl/tdlpackio">github repository</a>.</li>
<li>Latest <a href="https://github.com/eengl/tdlpackio/releases">releases</a> on GitHub.</li>
<li><a href="https://pypi.org/project/tdlpackio">PyPI</a></li>
</ul>

<h1 id="requires">Requires</h1>

<ul>
<li>Python 3.8+</li>
<li><a href="http://numpy.scipy.org">numpy array module</a>, version 1.22 or later.</li>
<li><a href="https://pypi.python.org/pypi/setuptools">setuptools</a>, version 34.0 or later.</li>
<li>Fortran compiler: GNU (gfortran) and Intel (ifort) have been tested.</li>
</ul>

<h1 id="install">Install</h1>

<div class="pdoc-code codehilite">
<pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>tdlpackio
</code></pre>
</div>

<p><strong>Build and Install from Source</strong></p>

<div class="pdoc-code codehilite">
<pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>.
</code></pre>
</div>

<p>To build with Intel compilers, perform the following:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>.<span class="w"> </span>--config-settings<span class="o">=</span><span class="s2">&quot;--build-option=build --fcompiler=intelem&quot;</span>
</code></pre>
</div>

<h1 id="tutorial">Tutorial</h1>

<ol>
<li><a href="#section1">Creating/Opening/Closing a TDLPACK file.</a></li>
<li><a href="#section2">Reading a TDLPACK file.</a></li>
<li><a href="#section3">TdlpackRecord Object.</a></li>
<li><a href="#section4">Creating a TdlpackRecord Object.</a></li>
<li><a href="#section5">Creating a TDLPACK Station Record.</a></li>
<li><a href="#section6">Creating a TDLPACK Record.</a></li>
<li><a href="#section7">Packing/Unpacking a TDLPACK Record.</a></li>
</ol>

<h2 id="div-idsection11-creatingopeningclosing-a-tdlpack-file"><div id='section1'>1) Creating/Opening/Closing a TDLPACK file.</h2>

<p>To create a TDLPACK file from Python, you call the <code><a href="#open">tdlpackio.open</a></code> function and provide the
file name, and if writing, <code>mode='w' or 'a'</code>.  For <code>mode='a'</code>, this will append to an existing
file.  When creating a new file, the default file format is <code>'sequential'</code>, but the user can
also specify the format with <code>format='sequential' or 'random-access'</code>.  If the new file is
random-access, then the user can also specify <code>ra_template='small' or 'large'</code>.  The default
is 'small' and 'large' is recommended for a high-resolution grids (i.e. ~ &gt; 2M total points).</p>

<p>Example: Create a new sequential file:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">tdlpackio</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="n"><a href="#open">tdlpackio.open</a></span><span class="p">(</span><span class="s1">&#39;test.sq&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
</code></pre>
</div>

<p>Example: Create a new random-access file:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">tdlpackio</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="n"><a href="#open">tdlpackio.open</a></span><span class="p">(</span><span class="s1">&#39;test.sq&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;random-access&#39;</span><span class="p">,</span><span class="n">ra_template</span><span class="o">=</span><span class="s1">&#39;small&#39;</span><span class="p">)</span>
</code></pre>
</div>

<p>To open an existing TDLPACK file, provide the filename since the default mode is read.
Throughout this tutorial, we will use the file, "gfspkd47.2017020100.sq".</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="kn">import</span> <span class="nn">tdlpackio</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="n"><a href="#open">tdlpackio.open</a></span><span class="p">(</span><span class="s2">&quot;./sampledata/gfspkd47.2017020100.sq&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc"><a href="#open">open</a></span><span class="s1">&#39;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span>
<span class="n">mode</span> <span class="o">=</span> <span class="n">rb</span>
<span class="n">name</span> <span class="o">=</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">ericengle</span><span class="o">/</span><span class="n">Projects</span><span class="o">/</span><span class="n">GitHub</span><span class="o">/</span><span class="n">tdlpackio</span><span class="o">/</span><span class="n">sampledata</span><span class="o">/</span><span class="n">gfspkd47</span><span class="mf">.2017020100</span><span class="o">.</span><span class="n">sq</span>
<span class="n">records</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">filetype</span> <span class="o">=</span> <span class="n">sequential</span>
<span class="n">size</span> <span class="o">=</span> <span class="mi">3363792</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre>
</div>

<h2 id="div-idsection22-reading-a-tdlpack-file"><div id='section2'>2) Reading a TDLPACK file.</h2>

<p>When tdlpackio opens a TDLPACK files, the entire contents of the file are indexed.
It is important to note that reading TDLPACK files is done natively in Python, including
reading random-access files.  This allows tdlpackio to control how much data is read
from disk for the purposes of indexing TDLPACK metadata.  Since records in the file have
already been inventoried, records can we read in a random access-like manner.</p>

<p>You can access records bye using index notation on the file object.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">rec</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">rec</span><span class="p">)</span>
<span class="mi">0</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2017020100</span><span class="p">:</span><span class="mi">001000008</span> <span class="mi">000001000</span> <span class="mi">000000000</span> <span class="mi">0000000000</span><span class="p">:</span>  <span class="mi">0</span><span class="o">-</span><span class="n">HR</span> <span class="n">FCST</span><span class="p">:</span><span class="mi">1000</span> <span class="n">MB</span> <span class="n">HGT</span> <span class="n">GFS</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">recs</span> <span class="o">=</span> <span class="n">f</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">recs</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">rec</span><span class="p">)</span>
<span class="o">...</span>
<span class="mi">0</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2017020100</span><span class="p">:</span><span class="mi">001000008</span> <span class="mi">000001000</span> <span class="mi">000000000</span> <span class="mi">0000000000</span><span class="p">:</span>  <span class="mi">0</span><span class="o">-</span><span class="n">HR</span> <span class="n">FCST</span><span class="p">:</span><span class="mi">1000</span> <span class="n">MB</span> <span class="n">HGT</span> <span class="n">GFS</span>
<span class="mi">1</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2017020100</span><span class="p">:</span><span class="mi">001000008</span> <span class="mi">000000975</span> <span class="mi">000000000</span> <span class="mi">0000000000</span><span class="p">:</span>  <span class="mi">0</span><span class="o">-</span><span class="n">HR</span> <span class="n">FCST</span><span class="p">:</span> <span class="mi">975</span> <span class="n">MB</span> <span class="n">HGT</span> <span class="n">GFS</span>
<span class="mi">2</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2017020100</span><span class="p">:</span><span class="mi">001000008</span> <span class="mi">000000950</span> <span class="mi">000000000</span> <span class="mi">0000000000</span><span class="p">:</span>  <span class="mi">0</span><span class="o">-</span><span class="n">HR</span> <span class="n">FCST</span><span class="p">:</span> <span class="mi">950</span> <span class="n">MB</span> <span class="n">HGT</span> <span class="n">GFS</span>
<span class="mi">3</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2017020100</span><span class="p">:</span><span class="mi">001000008</span> <span class="mi">000000925</span> <span class="mi">000000000</span> <span class="mi">0000000000</span><span class="p">:</span>  <span class="mi">0</span><span class="o">-</span><span class="n">HR</span> <span class="n">FCST</span><span class="p">:</span> <span class="mi">925</span> <span class="n">MB</span> <span class="n">HGT</span> <span class="n">GFS</span>
<span class="mi">4</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2017020100</span><span class="p">:</span><span class="mi">001000008</span> <span class="mi">000000900</span> <span class="mi">000000000</span> <span class="mi">0000000000</span><span class="p">:</span>  <span class="mi">0</span><span class="o">-</span><span class="n">HR</span> <span class="n">FCST</span><span class="p">:</span> <span class="mi">900</span> <span class="n">MB</span> <span class="n">HGT</span> <span class="n">GFS</span>
<span class="mi">5</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2017020100</span><span class="p">:</span><span class="mi">001000008</span> <span class="mi">000000850</span> <span class="mi">000000000</span> <span class="mi">0000000000</span><span class="p">:</span>  <span class="mi">0</span><span class="o">-</span><span class="n">HR</span> <span class="n">FCST</span><span class="p">:</span> <span class="mi">850</span> <span class="n">MB</span> <span class="n">HGT</span> <span class="n">GFS</span>
<span class="mi">6</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2017020100</span><span class="p">:</span><span class="mi">001000008</span> <span class="mi">000000800</span> <span class="mi">000000000</span> <span class="mi">0000000000</span><span class="p">:</span>  <span class="mi">0</span><span class="o">-</span><span class="n">HR</span> <span class="n">FCST</span><span class="p">:</span> <span class="mi">800</span> <span class="n">MB</span> <span class="n">HGT</span> <span class="n">GFS</span>
<span class="mi">7</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2017020100</span><span class="p">:</span><span class="mi">001000008</span> <span class="mi">000000750</span> <span class="mi">000000000</span> <span class="mi">0000000000</span><span class="p">:</span>  <span class="mi">0</span><span class="o">-</span><span class="n">HR</span> <span class="n">FCST</span><span class="p">:</span> <span class="mi">750</span> <span class="n">MB</span> <span class="n">HGT</span> <span class="n">GFS</span>
<span class="mi">8</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2017020100</span><span class="p">:</span><span class="mi">001000008</span> <span class="mi">000000700</span> <span class="mi">000000000</span> <span class="mi">0000000000</span><span class="p">:</span>  <span class="mi">0</span><span class="o">-</span><span class="n">HR</span> <span class="n">FCST</span><span class="p">:</span> <span class="mi">700</span> <span class="n">MB</span> <span class="n">HGT</span> <span class="n">GFS</span>
<span class="mi">9</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2017020100</span><span class="p">:</span><span class="mi">001000008</span> <span class="mi">000000600</span> <span class="mi">000000000</span> <span class="mi">0000000000</span><span class="p">:</span>  <span class="mi">0</span><span class="o">-</span><span class="n">HR</span> <span class="n">FCST</span><span class="p">:</span> <span class="mi">600</span> <span class="n">MB</span> <span class="n">HGT</span> <span class="n">GFS</span>
</code></pre>
</div>

<h2 id="div-idsection33-tdlpackrecord-object"><div id='section3'>3) TdlpackRecord Object.</h2>

<p>All TDLPACK records are represented in tdlpackio as class TdlpackRecord.  This class
accommdates both gridded and vector (i.e. station) records.  The TdlpackRecord class
only stores the TDLPACK metadata sections which are integer based and a few other
pieces of of data.  The TDLPACK metadata attributes are descriptor classes that
contain custom __get__() and __set__() methods for each metadata attribute that map
to a certain integer value in the TDLPACK sections.  The packed data are not read from
disk until data are requested by referencing the <code>data</code> attribute.  This is commonly
referred to as "lazy reading".</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">rec</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rec</span><span class="o">.</span><span class="n">is0</span>
<span class="n">array</span><span class="p">([</span><span class="mi">1347175508</span><span class="p">,</span>      <span class="mi">21661</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>
                <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>
                <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>
                <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>
                <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>
                <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>
                <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>
                <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>
                <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>
                <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>
                <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int32</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rec</span><span class="o">.</span><span class="n">is1</span>
<span class="n">array</span><span class="p">([</span>        <span class="mi">71</span><span class="p">,</span>          <span class="mi">1</span><span class="p">,</span>       <span class="mi">2017</span><span class="p">,</span>          <span class="mi">2</span><span class="p">,</span>          <span class="mi">1</span><span class="p">,</span>
                <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span> <span class="mi">2017020100</span><span class="p">,</span>    <span class="mi">1000008</span><span class="p">,</span>       <span class="mi">1000</span><span class="p">,</span>
                <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">8</span><span class="p">,</span>
                <span class="mi">1</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>
                <span class="mi">0</span><span class="p">,</span>         <span class="mi">32</span><span class="p">,</span>         <span class="mi">49</span><span class="p">,</span>         <span class="mi">48</span><span class="p">,</span>         <span class="mi">48</span><span class="p">,</span>
               <span class="mi">48</span><span class="p">,</span>         <span class="mi">32</span><span class="p">,</span>         <span class="mi">77</span><span class="p">,</span>         <span class="mi">66</span><span class="p">,</span>         <span class="mi">32</span><span class="p">,</span>
               <span class="mi">72</span><span class="p">,</span>         <span class="mi">71</span><span class="p">,</span>         <span class="mi">84</span><span class="p">,</span>         <span class="mi">32</span><span class="p">,</span>         <span class="mi">71</span><span class="p">,</span>
               <span class="mi">70</span><span class="p">,</span>         <span class="mi">83</span><span class="p">,</span>         <span class="mi">32</span><span class="p">,</span>         <span class="mi">32</span><span class="p">,</span>         <span class="mi">32</span><span class="p">,</span>
               <span class="mi">32</span><span class="p">,</span>         <span class="mi">32</span><span class="p">,</span>         <span class="mi">32</span><span class="p">,</span>         <span class="mi">32</span><span class="p">,</span>         <span class="mi">32</span><span class="p">,</span>
               <span class="mi">32</span><span class="p">,</span>         <span class="mi">32</span><span class="p">,</span>         <span class="mi">32</span><span class="p">,</span>         <span class="mi">32</span><span class="p">,</span>         <span class="mi">32</span><span class="p">,</span>
               <span class="mi">32</span><span class="p">,</span>         <span class="mi">32</span><span class="p">,</span>         <span class="mi">32</span><span class="p">,</span>         <span class="mi">32</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int32</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rec</span><span class="o">.</span><span class="n">is2</span>
<span class="n">array</span><span class="p">([</span>      <span class="mi">28</span><span class="p">,</span>        <span class="mi">5</span><span class="p">,</span>      <span class="mi">297</span><span class="p">,</span>      <span class="mi">169</span><span class="p">,</span>    <span class="mi">28320</span><span class="p">,</span>  <span class="mi">1500000</span><span class="p">,</span>
        <span class="mi">1050000</span><span class="p">,</span> <span class="mi">47625000</span><span class="p">,</span>   <span class="mi">600000</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>
              <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>
              <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>
              <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>
              <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>
              <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>
              <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>
              <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>        <span class="mi">0</span><span class="p">],</span>
      <span class="n">dtype</span><span class="o">=</span><span class="n">int32</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rec</span><span class="o">.</span><span class="n">is4</span>
<span class="n">array</span><span class="p">([</span><span class="mi">21550</span><span class="p">,</span>    <span class="mi">12</span><span class="p">,</span> <span class="mi">50193</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>
           <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>
           <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>
           <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>
           <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>
           <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">],</span>
      <span class="n">dtype</span><span class="o">=</span><span class="n">int32</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rec</span>
<span class="n">Section</span> <span class="mi">0</span><span class="p">:</span> <span class="n">edition</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">Section</span> <span class="mi">1</span><span class="p">:</span> <span class="n">sectionFlags</span> <span class="o">=</span> <span class="mi">00000001</span>
<span class="n">Section</span> <span class="mi">1</span><span class="p">:</span> <span class="n">year</span> <span class="o">=</span> <span class="mi">2017</span>
<span class="n">Section</span> <span class="mi">1</span><span class="p">:</span> <span class="n">month</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">Section</span> <span class="mi">1</span><span class="p">:</span> <span class="n">day</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">Section</span> <span class="mi">1</span><span class="p">:</span> <span class="n">hour</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">Section</span> <span class="mi">1</span><span class="p">:</span> <span class="n">minute</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">Section</span> <span class="mi">1</span><span class="p">:</span> <span class="n">refDate</span> <span class="o">=</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
<span class="n">Section</span> <span class="mi">1</span><span class="p">:</span> <span class="n">id1</span> <span class="o">=</span> <span class="mi">1000008</span>
<span class="n">Section</span> <span class="mi">1</span><span class="p">:</span> <span class="n">id2</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">Section</span> <span class="mi">1</span><span class="p">:</span> <span class="n">id3</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">Section</span> <span class="mi">1</span><span class="p">:</span> <span class="n">id4</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">Section</span> <span class="mi">1</span><span class="p">:</span> <span class="nb">id</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1000008</span>    <span class="mi">1000</span>       <span class="mi">0</span>       <span class="mi">0</span><span class="p">]</span>
<span class="n">Section</span> <span class="mi">1</span><span class="p">:</span> <span class="n">leadTime</span> <span class="o">=</span> <span class="mi">0</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
<span class="n">Section</span> <span class="mi">1</span><span class="p">:</span> <span class="n">leadTimeMinutes</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">Section</span> <span class="mi">1</span><span class="p">:</span> <span class="n">decScaleFactor</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">Section</span> <span class="mi">1</span><span class="p">:</span> <span class="n">binScaleFactor</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">Section</span> <span class="mi">1</span><span class="p">:</span> <span class="n">name</span> <span class="o">=</span> <span class="mi">1000</span> <span class="n">MB</span> <span class="n">HGT</span> <span class="n">GFS</span>
<span class="n">Section</span> <span class="mi">1</span><span class="p">:</span> <span class="nb">type</span> <span class="o">=</span> <span class="n">grid</span>
<span class="n">Section</span> <span class="mi">1</span><span class="p">:</span> <span class="n">validDate</span> <span class="o">=</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
<span class="n">Section</span> <span class="mi">2</span><span class="p">:</span> <span class="n">mapProjection</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">Section</span> <span class="mi">2</span><span class="p">:</span> <span class="n">nx</span> <span class="o">=</span> <span class="mi">297</span>
<span class="n">Section</span> <span class="mi">2</span><span class="p">:</span> <span class="n">ny</span> <span class="o">=</span> <span class="mi">169</span>
<span class="n">Section</span> <span class="mi">2</span><span class="p">:</span> <span class="n">latitudeLowerLeft</span> <span class="o">=</span> <span class="mf">2.8320000000000003</span>
<span class="n">Section</span> <span class="mi">2</span><span class="p">:</span> <span class="n">longitudeLowerLeft</span> <span class="o">=</span> <span class="mf">150.0</span>
<span class="n">Section</span> <span class="mi">2</span><span class="p">:</span> <span class="n">orientationLongitude</span> <span class="o">=</span> <span class="mf">105.0</span>
<span class="n">Section</span> <span class="mi">2</span><span class="p">:</span> <span class="n">gridLength</span> <span class="o">=</span> <span class="mf">47625.0</span>
<span class="n">Section</span> <span class="mi">2</span><span class="p">:</span> <span class="n">standardLatitude</span> <span class="o">=</span> <span class="mf">60.0</span>
<span class="n">Section</span> <span class="mi">4</span><span class="p">:</span> <span class="n">packingFlags</span> <span class="o">=</span> <span class="mi">00001100</span>
<span class="n">Section</span> <span class="mi">4</span><span class="p">:</span> <span class="n">numberOfPackedValues</span> <span class="o">=</span> <span class="mi">50193</span>
<span class="n">Section</span> <span class="mi">4</span><span class="p">:</span> <span class="n">primaryMissingValue</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">Section</span> <span class="mi">4</span><span class="p">:</span> <span class="n">secondaryMissingValue</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">Section</span> <span class="mi">4</span><span class="p">:</span> <span class="n">overallMinValue</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">Section</span> <span class="mi">4</span><span class="p">:</span> <span class="n">numberOfGroups</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre>
</div>

<p>Unpacking the data:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">rec</span><span class="o">.</span><span class="n">data</span>
<span class="n">array</span><span class="p">([[</span> <span class="mf">88.</span><span class="p">,</span>  <span class="mf">88.</span><span class="p">,</span>  <span class="mf">88.</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="mf">107.</span><span class="p">,</span> <span class="mf">101.</span><span class="p">,</span>  <span class="mf">97.</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">87.</span><span class="p">,</span>  <span class="mf">88.</span><span class="p">,</span>  <span class="mf">88.</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="mf">118.</span><span class="p">,</span> <span class="mf">114.</span><span class="p">,</span> <span class="mf">104.</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">87.</span><span class="p">,</span>  <span class="mf">87.</span><span class="p">,</span>  <span class="mf">87.</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="mf">120.</span><span class="p">,</span> <span class="mf">120.</span><span class="p">,</span> <span class="mf">116.</span><span class="p">],</span>
       <span class="o">...</span><span class="p">,</span>
       <span class="p">[</span><span class="mf">136.</span><span class="p">,</span> <span class="mf">135.</span><span class="p">,</span> <span class="mf">135.</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="mf">170.</span><span class="p">,</span> <span class="mf">174.</span><span class="p">,</span> <span class="mf">177.</span><span class="p">],</span>
       <span class="p">[</span><span class="mf">136.</span><span class="p">,</span> <span class="mf">136.</span><span class="p">,</span> <span class="mf">135.</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="mf">170.</span><span class="p">,</span> <span class="mf">173.</span><span class="p">,</span> <span class="mf">176.</span><span class="p">],</span>
       <span class="p">[</span><span class="mf">136.</span><span class="p">,</span> <span class="mf">136.</span><span class="p">,</span> <span class="mf">135.</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="mf">169.</span><span class="p">,</span> <span class="mf">172.</span><span class="p">,</span> <span class="mf">175.</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">float32</span><span class="p">)</span>
</code></pre>
</div>

<p>Use the <code>latlons()</code> method to get latitude and longitude values for gridded records.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">rec</span><span class="o">.</span><span class="n">latlons</span><span class="p">()</span>
<span class="p">(</span><span class="n">array</span><span class="p">([[</span> <span class="mf">2.8320062</span><span class="p">,</span>  <span class="mf">3.002308</span> <span class="p">,</span>  <span class="mf">3.1725748</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span>  <span class="mf">9.856886</span> <span class="p">,</span>  <span class="mf">9.695385</span> <span class="p">,</span>
         <span class="mf">9.53346</span>  <span class="p">],</span>
       <span class="p">[</span> <span class="mf">3.0023057</span><span class="p">,</span>  <span class="mf">3.1735988</span><span class="p">,</span>  <span class="mf">3.3448648</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="mf">10.0720415</span><span class="p">,</span>  <span class="mf">9.909414</span> <span class="p">,</span>
         <span class="mf">9.746364</span> <span class="p">],</span>
       <span class="p">[</span> <span class="mf">3.172573</span> <span class="p">,</span>  <span class="mf">3.344863</span> <span class="p">,</span>  <span class="mf">3.5171287</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="mf">10.287412</span> <span class="p">,</span> <span class="mf">10.12365</span>  <span class="p">,</span>
         <span class="mf">9.959467</span> <span class="p">],</span>
       <span class="o">...</span><span class="p">,</span>
       <span class="p">[</span><span class="mf">22.115602</span> <span class="p">,</span> <span class="mf">22.432093</span> <span class="p">,</span> <span class="mf">22.749762</span> <span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="mf">36.43131</span>  <span class="p">,</span> <span class="mf">36.066128</span> <span class="p">,</span>
        <span class="mf">35.70211</span>  <span class="p">],</span>
       <span class="p">[</span><span class="mf">22.118425</span> <span class="p">,</span> <span class="mf">22.43495</span>  <span class="p">,</span> <span class="mf">22.752638</span> <span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="mf">36.43567</span>  <span class="p">,</span> <span class="mf">36.07043</span>  <span class="p">,</span>
        <span class="mf">35.706383</span> <span class="p">],</span>
       <span class="p">[</span><span class="mf">22.119368</span> <span class="p">,</span> <span class="mf">22.435898</span> <span class="p">,</span> <span class="mf">22.7536</span>   <span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="mf">36.437122</span> <span class="p">,</span> <span class="mf">36.07187</span>  <span class="p">,</span>
        <span class="mf">35.7078</span>   <span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">float32</span><span class="p">),</span> <span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mf">150.00027</span> <span class="p">,</span> <span class="o">-</span><span class="mf">149.82924</span> <span class="p">,</span> <span class="o">-</span><span class="mf">149.6572</span>  <span class="p">,</span> <span class="o">...</span><span class="p">,</span>  <span class="o">-</span><span class="mf">68.13083</span> <span class="p">,</span>
         <span class="o">-</span><span class="mf">67.91318</span> <span class="p">,</span>  <span class="o">-</span><span class="mf">67.69678</span> <span class="p">],</span>
       <span class="p">[</span><span class="o">-</span><span class="mf">150.1713</span>  <span class="p">,</span> <span class="o">-</span><span class="mf">150.00027</span> <span class="p">,</span> <span class="o">-</span><span class="mf">149.82822</span> <span class="p">,</span> <span class="o">...</span><span class="p">,</span>  <span class="o">-</span><span class="mf">67.96649</span> <span class="p">,</span>
         <span class="o">-</span><span class="mf">67.748505</span><span class="p">,</span>  <span class="o">-</span><span class="mf">67.53174</span> <span class="p">],</span>
       <span class="p">[</span><span class="o">-</span><span class="mf">150.34335</span> <span class="p">,</span> <span class="o">-</span><span class="mf">150.17233</span> <span class="p">,</span> <span class="o">-</span><span class="mf">150.00027</span> <span class="p">,</span> <span class="o">...</span><span class="p">,</span>  <span class="o">-</span><span class="mf">67.8009</span>  <span class="p">,</span>
         <span class="o">-</span><span class="mf">67.58258</span> <span class="p">,</span>  <span class="o">-</span><span class="mf">67.36548</span> <span class="p">],</span>
       <span class="o">...</span><span class="p">,</span>
       <span class="p">[</span><span class="o">-</span><span class="mf">194.31772</span> <span class="p">,</span> <span class="o">-</span><span class="mf">194.31343</span> <span class="p">,</span> <span class="o">-</span><span class="mf">194.30917</span> <span class="p">,</span> <span class="o">...</span><span class="p">,</span>  <span class="o">-</span><span class="mf">15.910004</span><span class="p">,</span>
         <span class="o">-</span><span class="mf">15.902863</span><span class="p">,</span>  <span class="o">-</span><span class="mf">15.895691</span><span class="p">],</span>
       <span class="p">[</span><span class="o">-</span><span class="mf">194.65808</span> <span class="p">,</span> <span class="o">-</span><span class="mf">194.6575</span>  <span class="p">,</span> <span class="o">-</span><span class="mf">194.65466</span> <span class="p">,</span> <span class="o">...</span><span class="p">,</span>  <span class="o">-</span><span class="mf">15.455414</span><span class="p">,</span>
         <span class="o">-</span><span class="mf">15.451965</span><span class="p">,</span>  <span class="o">-</span><span class="mf">15.447632</span><span class="p">],</span>
       <span class="p">[</span><span class="o">-</span><span class="mf">195.00015</span> <span class="p">,</span> <span class="o">-</span><span class="mf">195.00015</span> <span class="p">,</span> <span class="o">-</span><span class="mf">195.00015</span> <span class="p">,</span> <span class="o">...</span><span class="p">,</span>  <span class="o">-</span><span class="mf">15.</span>      <span class="p">,</span>
         <span class="o">-</span><span class="mf">15.</span>      <span class="p">,</span>  <span class="o">-</span><span class="mf">15.</span>      <span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">float32</span><span class="p">))</span>
</code></pre>
</div>

<h2 id="div-idsection44-creating-a-tdlpack-station-record"><div id='section4'>4) Creating a TDLPACK Station Record.</h2>

<p>The constructor for <code>pytdlpack.TdlpackStationRecord</code> provides two methods of
instantiation via the traditional <strong>kwargs (see <code>pytdlpack.TdlpackStationRecord.__init__</code>)
or simply providing <code>ccall = ...</code> <em></strong>(recommended)</em>**.  The value passed to the <code>ccall=</code> argument can
be a single call letter string, list, tuple, or comma-delimited string of station call letter records.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">pytdlpack</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">stations</span> <span class="o">=</span> <span class="n">pytdlpack</span><span class="o">.</span><span class="n">TdlpackStationRecord</span><span class="p">([</span><span class="s1">&#39;KBWI&#39;</span><span class="p">,</span><span class="s1">&#39;KDCA&#39;</span><span class="p">,</span><span class="s1">&#39;KIAD&#39;</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">stations</span>
<span class="n">ccall</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;KBWI&#39;</span><span class="p">,</span> <span class="s1">&#39;KDCA&#39;</span><span class="p">,</span> <span class="s1">&#39;KIAD&#39;</span><span class="p">]</span>
<span class="nb">id</span> <span class="o">=</span> <span class="p">[</span><span class="mi">400001000</span>         <span class="mi">0</span>         <span class="mi">0</span>         <span class="mi">0</span><span class="p">]</span>
<span class="n">ioctet</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">ipack</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">number_of_stations</span> <span class="o">=</span> <span class="mi">3</span>
</code></pre>
</div>

<h2 id="div-idsection55-creating-a-tdlpack-record"><div id='section5'>5) Creating a TDLPACK Record.</h2>

<p>The recommended method for creating a <code>pytdlpack.TdlpackRecord</code> is to pass the TDLPACK
indentification arrays, plain language string, and data to the approproiate keyword.  Please
see <code>pytdlpack.TdlpackRecord.__init__</code> for more info.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">record</span> <span class="o">=</span> <span class="n">pytdlpack</span><span class="o">.</span><span class="n">TdlpackRecord</span><span class="p">(</span><span class="n">date</span><span class="o">=</span><span class="mi">2019070100</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="p">[</span><span class="mi">4210008</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span><span class="n">lead</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span>
<span class="n">plain</span><span class="o">=</span><span class="s2">&quot;GFS WIND SPEED&quot;</span><span class="p">,</span><span class="n">grid</span><span class="o">=</span><span class="n">grid_def</span><span class="p">,</span><span class="n">data</span><span class="o">=&lt;</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span> <span class="n">array</span><span class="o">&gt;</span><span class="p">)</span>
</code></pre>
</div>

<p>The user is encouraged to read the official MOS-2000 documentation (specifically Chapter 5)
on construction of these arrays and proper encoding.</p>

<h2 id="div-idsection66-packingunpacking-a-tdlpack-record"><div id='section6'>6) Packing/Unpacking a TDLPACK Record.</h2>

<p>Once any of the three classes of TDLPACK records have been instantiated, you can pack the
record using the class method <code>pack</code>.  Using the example from <a href="#section5">Section 5</a>, <code>record</code>
is now an instance of <code>pytdlpack.TdlpackRecord</code>.  You can pack this record with the following:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">record</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
</code></pre>
</div>

<p>To unpack a packed TDLPACK record, perform:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">record</span><span class="o">.</span><span class="n">unpack</span><span class="p">()</span>
</code></pre>
</div>

<p>The <code>pytdlpack.TdlpackRecord.unpack</code> class method for TDLPACK data records, contains optional
arguments <code>data=</code> (to control the unpacking of data) and <code>missing_value=</code> (to set a different
missing value other than what is contained in the record).  For TDLPACK data records,
<code>pytdlpack.TdlpackRecord.unpack</code> automatically unpacks the TDLPACK meta-data.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">record</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">missing_value</span><span class="o">=-</span><span class="mf">9999.0</span><span class="p">)</span>
</code></pre>
</div>
</div>

                        <input id="mod-tdlpackio-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-tdlpackio-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">1</span></a><span class="c1"># init for tdlpackio package</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">2</span></a><span class="kn">from</span> <span class="nn">._tdlpackio</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">3</span></a><span class="kn">from</span> <span class="nn">._tdlpackio</span> <span class="kn">import</span> <span class="vm">__doc__</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">4</span></a>
</span><span id="L-5"><a href="#L-5"><span class="linenos">5</span></a><span class="c1">#from ._grid_definitions import grids</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">6</span></a>
</span><span id="L-7"><a href="#L-7"><span class="linenos">7</span></a><span class="kn">from</span> <span class="nn">.version</span> <span class="kn">import</span> <span class="n">version</span> <span class="k">as</span> <span class="n">__version__</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">8</span></a>
</span><span id="L-9"><a href="#L-9"><span class="linenos">9</span></a><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;__version__&#39;</span><span class="p">,</span><span class="s1">&#39;open&#39;</span><span class="p">,</span><span class="s1">&#39;TdlpackRecord&#39;</span><span class="p">,</span><span class="s1">&#39;TdlpackStationRecord&#39;</span><span class="p">,</span><span class="s1">&#39;TdlpackTrailerRecord&#39;</span><span class="p">,]</span>
</span></pre></div>


            </section>
                <section id="__version__">
                    <div class="attr variable">
            <span class="name">__version__</span>        =
<span class="default_value">&#39;2.0.0&#39;</span>

        
    </div>
    <a class="headerlink" href="#__version__"></a>
    
    

                </section>
                <section id="open">
                            <input id="open-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">open</span>:

                <label class="view-source-button" for="open-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#open"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="open-401"><a href="#open-401"><span class="linenos">401</span></a><span class="k">class</span> <span class="nc">open</span><span class="p">:</span>
</span><span id="open-402"><a href="#open-402"><span class="linenos">402</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="open-403"><a href="#open-403"><span class="linenos">403</span></a><span class="sd">    Open class for tdlpackio.</span>
</span><span id="open-404"><a href="#open-404"><span class="linenos">404</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="open-405"><a href="#open-405"><span class="linenos">405</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ra_template</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="open-406"><a href="#open-406"><span class="linenos">406</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="open-407"><a href="#open-407"><span class="linenos">407</span></a><span class="sd">        Class Constructor</span>
</span><span id="open-408"><a href="#open-408"><span class="linenos">408</span></a>
</span><span id="open-409"><a href="#open-409"><span class="linenos">409</span></a><span class="sd">        Parameters</span>
</span><span id="open-410"><a href="#open-410"><span class="linenos">410</span></a><span class="sd">        ----------</span>
</span><span id="open-411"><a href="#open-411"><span class="linenos">411</span></a><span class="sd">        **`path : str`**</span>
</span><span id="open-412"><a href="#open-412"><span class="linenos">412</span></a><span class="sd">            File name.</span>
</span><span id="open-413"><a href="#open-413"><span class="linenos">413</span></a>
</span><span id="open-414"><a href="#open-414"><span class="linenos">414</span></a><span class="sd">        **`mode : str, optional, default = &#39;r&#39;`**</span>
</span><span id="open-415"><a href="#open-415"><span class="linenos">415</span></a><span class="sd">            File handle mode.  The default is open for reading (&#39;r&#39;).</span>
</span><span id="open-416"><a href="#open-416"><span class="linenos">416</span></a>
</span><span id="open-417"><a href="#open-417"><span class="linenos">417</span></a><span class="sd">        **`format : str, optional, default = &#39;sequential&#39;`**</span>
</span><span id="open-418"><a href="#open-418"><span class="linenos">418</span></a><span class="sd">            File type when creating a new file.  Valid values are &#39;sequential` </span>
</span><span id="open-419"><a href="#open-419"><span class="linenos">419</span></a><span class="sd">            (DEFAULT) or &#39;random-access&#39;.</span>
</span><span id="open-420"><a href="#open-420"><span class="linenos">420</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="open-421"><a href="#open-421"><span class="linenos">421</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;r&#39;</span> <span class="ow">or</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;w&#39;</span><span class="p">:</span> <span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span><span class="o">+</span><span class="s1">&#39;b&#39;</span>
</span><span id="open-422"><a href="#open-422"><span class="linenos">422</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;wb&#39;</span>
</span><span id="open-423"><a href="#open-423"><span class="linenos">423</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_byteorder</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="open-424"><a href="#open-424"><span class="linenos">424</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_hasindex</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="open-425"><a href="#open-425"><span class="linenos">425</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_index</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="open-426"><a href="#open-426"><span class="linenos">426</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>
</span><span id="open-427"><a href="#open-427"><span class="linenos">427</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="open-428"><a href="#open-428"><span class="linenos">428</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">records</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="open-429"><a href="#open-429"><span class="linenos">429</span></a>
</span><span id="open-430"><a href="#open-430"><span class="linenos">430</span></a>        <span class="c1"># Perform indexing on read</span>
</span><span id="open-431"><a href="#open-431"><span class="linenos">431</span></a>        <span class="k">if</span> <span class="s1">&#39;r&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">:</span>
</span><span id="open-432"><a href="#open-432"><span class="linenos">432</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span> <span class="o">=</span> <span class="n">builtins</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span><span class="n">buffering</span><span class="o">=</span><span class="n">ONE_MB</span><span class="p">)</span>
</span><span id="open-433"><a href="#open-433"><span class="linenos">433</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">filetype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_tdlpack_file_type</span><span class="p">()</span>
</span><span id="open-434"><a href="#open-434"><span class="linenos">434</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_build_index</span><span class="p">()</span>
</span><span id="open-435"><a href="#open-435"><span class="linenos">435</span></a>        <span class="k">elif</span> <span class="s1">&#39;w&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">:</span>
</span><span id="open-436"><a href="#open-436"><span class="linenos">436</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">bytes_written</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="open-437"><a href="#open-437"><span class="linenos">437</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">records_written</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="open-438"><a href="#open-438"><span class="linenos">438</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">filetype</span> <span class="o">=</span> <span class="nb">format</span> <span class="k">if</span> <span class="nb">format</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s1">&#39;sequential&#39;</span>
</span><span id="open-439"><a href="#open-439"><span class="linenos">439</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">filetype</span> <span class="o">==</span> <span class="s1">&#39;random-access&#39;</span><span class="p">:</span>
</span><span id="open-440"><a href="#open-440"><span class="linenos">440</span></a>                <span class="n">ifiletype</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="open-441"><a href="#open-441"><span class="linenos">441</span></a>                <span class="n">ra_template</span> <span class="o">=</span> <span class="s1">&#39;small&#39;</span> <span class="k">if</span> <span class="n">ra_template</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">ra_template</span>
</span><span id="open-442"><a href="#open-442"><span class="linenos">442</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_lun</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_byteorder</span><span class="p">,</span><span class="n">ifiletype</span><span class="p">,</span><span class="n">ier</span> <span class="o">=</span> \
</span><span id="open-443"><a href="#open-443"><span class="linenos">443</span></a>                <span class="n">tdlpacklib</span><span class="o">.</span><span class="n">openfile</span><span class="p">(</span><span class="n">FORTRAN_STDOUT_LUN</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_byteorder</span><span class="p">,</span><span class="n">ifiletype</span><span class="p">,</span><span class="n">ra_template</span><span class="o">=</span><span class="n">ra_template</span><span class="p">)</span>
</span><span id="open-444"><a href="#open-444"><span class="linenos">444</span></a>            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">filetype</span> <span class="o">==</span> <span class="s1">&#39;sequential&#39;</span><span class="p">:</span>
</span><span id="open-445"><a href="#open-445"><span class="linenos">445</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span> <span class="o">=</span> <span class="n">builtins</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span><span class="n">buffering</span><span class="o">=</span><span class="n">ONE_MB</span><span class="p">)</span>
</span><span id="open-446"><a href="#open-446"><span class="linenos">446</span></a>                <span class="n">ifiletype</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="open-447"><a href="#open-447"><span class="linenos">447</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_lun</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_byteorder</span><span class="p">,</span><span class="n">ifiletype</span><span class="p">,</span><span class="n">ier</span> <span class="o">=</span> \
</span><span id="open-448"><a href="#open-448"><span class="linenos">448</span></a>                <span class="n">tdlpacklib</span><span class="o">.</span><span class="n">openfile</span><span class="p">(</span><span class="n">FORTRAN_STDOUT_LUN</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_byteorder</span><span class="p">,</span><span class="n">ifiletype</span><span class="p">)</span>
</span><span id="open-449"><a href="#open-449"><span class="linenos">449</span></a>
</span><span id="open-450"><a href="#open-450"><span class="linenos">450</span></a>        <span class="c1"># Get file size</span>
</span><span id="open-451"><a href="#open-451"><span class="linenos">451</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="open-452"><a href="#open-452"><span class="linenos">452</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="open-453"><a href="#open-453"><span class="linenos">453</span></a>        <span class="k">except</span><span class="p">(</span><span class="ne">FileNotFoundError</span><span class="p">):</span>
</span><span id="open-454"><a href="#open-454"><span class="linenos">454</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="open-455"><a href="#open-455"><span class="linenos">455</span></a>        <span class="c1"># Add self to file data store</span>
</span><span id="open-456"><a href="#open-456"><span class="linenos">456</span></a>        <span class="n">_open_file_store</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span>
</span><span id="open-457"><a href="#open-457"><span class="linenos">457</span></a>
</span><span id="open-458"><a href="#open-458"><span class="linenos">458</span></a>    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="open-459"><a href="#open-459"><span class="linenos">459</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="open-460"><a href="#open-460"><span class="linenos">460</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="open-461"><a href="#open-461"><span class="linenos">461</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="open-462"><a href="#open-462"><span class="linenos">462</span></a>
</span><span id="open-463"><a href="#open-463"><span class="linenos">463</span></a>    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">atype</span> <span class="p">,</span><span class="n">value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
</span><span id="open-464"><a href="#open-464"><span class="linenos">464</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="open-465"><a href="#open-465"><span class="linenos">465</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="open-466"><a href="#open-466"><span class="linenos">466</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="open-467"><a href="#open-467"><span class="linenos">467</span></a>
</span><span id="open-468"><a href="#open-468"><span class="linenos">468</span></a>    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="open-469"><a href="#open-469"><span class="linenos">469</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="open-470"><a href="#open-470"><span class="linenos">470</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="open-471"><a href="#open-471"><span class="linenos">471</span></a>        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;record&#39;</span><span class="p">]</span>
</span><span id="open-472"><a href="#open-472"><span class="linenos">472</span></a>
</span><span id="open-473"><a href="#open-473"><span class="linenos">473</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="open-474"><a href="#open-474"><span class="linenos">474</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="open-475"><a href="#open-475"><span class="linenos">475</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="open-476"><a href="#open-476"><span class="linenos">476</span></a>        <span class="n">strings</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="open-477"><a href="#open-477"><span class="linenos">477</span></a>        <span class="n">keys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</span><span id="open-478"><a href="#open-478"><span class="linenos">478</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
</span><span id="open-479"><a href="#open-479"><span class="linenos">479</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">k</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">):</span>
</span><span id="open-480"><a href="#open-480"><span class="linenos">480</span></a>                <span class="n">strings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">k</span><span class="p">]))</span>
</span><span id="open-481"><a href="#open-481"><span class="linenos">481</span></a>        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">strings</span><span class="p">)</span>
</span><span id="open-482"><a href="#open-482"><span class="linenos">482</span></a>
</span><span id="open-483"><a href="#open-483"><span class="linenos">483</span></a>    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">):</span>
</span><span id="open-484"><a href="#open-484"><span class="linenos">484</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="open-485"><a href="#open-485"><span class="linenos">485</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="open-486"><a href="#open-486"><span class="linenos">486</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="nb">slice</span><span class="p">):</span>
</span><span id="open-487"><a href="#open-487"><span class="linenos">487</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;record&#39;</span><span class="p">][</span><span class="n">key</span><span class="p">]</span>
</span><span id="open-488"><a href="#open-488"><span class="linenos">488</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="nb">int</span><span class="p">):</span>
</span><span id="open-489"><a href="#open-489"><span class="linenos">489</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;record&#39;</span><span class="p">][</span><span class="n">key</span><span class="p">]</span>
</span><span id="open-490"><a href="#open-490"><span class="linenos">490</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="open-491"><a href="#open-491"><span class="linenos">491</span></a>            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Key must be an integer record number or a slice&#39;</span><span class="p">)</span>
</span><span id="open-492"><a href="#open-492"><span class="linenos">492</span></a>
</span><span id="open-493"><a href="#open-493"><span class="linenos">493</span></a>    <span class="k">def</span> <span class="nf">_get_tdlpack_file_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="open-494"><a href="#open-494"><span class="linenos">494</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="open-495"><a href="#open-495"><span class="linenos">495</span></a><span class="sd">        Determine the type of TDLPACK file.</span>
</span><span id="open-496"><a href="#open-496"><span class="linenos">496</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="open-497"><a href="#open-497"><span class="linenos">497</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="open-498"><a href="#open-498"><span class="linenos">498</span></a>        <span class="n">a</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt;i&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="open-499"><a href="#open-499"><span class="linenos">499</span></a>        <span class="n">b</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt;i&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="open-500"><a href="#open-500"><span class="linenos">500</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="open-501"><a href="#open-501"><span class="linenos">501</span></a>        <span class="k">return</span> <span class="s1">&#39;random-access&#39;</span> <span class="k">if</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span> <span class="k">else</span> <span class="s1">&#39;sequential&#39;</span>
</span><span id="open-502"><a href="#open-502"><span class="linenos">502</span></a>
</span><span id="open-503"><a href="#open-503"><span class="linenos">503</span></a>    <span class="k">def</span> <span class="nf">_build_index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="open-504"><a href="#open-504"><span class="linenos">504</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="open-505"><a href="#open-505"><span class="linenos">505</span></a><span class="sd">        Record Indexer</span>
</span><span id="open-506"><a href="#open-506"><span class="linenos">506</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="open-507"><a href="#open-507"><span class="linenos">507</span></a>        <span class="c1"># Initialize index dictionary</span>
</span><span id="open-508"><a href="#open-508"><span class="linenos">508</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;offset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="open-509"><a href="#open-509"><span class="linenos">509</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="open-510"><a href="#open-510"><span class="linenos">510</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="open-511"><a href="#open-511"><span class="linenos">511</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;record&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="open-512"><a href="#open-512"><span class="linenos">512</span></a>
</span><span id="open-513"><a href="#open-513"><span class="linenos">513</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">filetype</span> <span class="o">==</span> <span class="s1">&#39;sequential&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sequential_file_indexer</span><span class="p">()</span>
</span><span id="open-514"><a href="#open-514"><span class="linenos">514</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">filetype</span> <span class="o">==</span> <span class="s1">&#39;random-access&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_randomaccess_file_indexer</span><span class="p">()</span>
</span><span id="open-515"><a href="#open-515"><span class="linenos">515</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_hasindex</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="open-516"><a href="#open-516"><span class="linenos">516</span></a>
</span><span id="open-517"><a href="#open-517"><span class="linenos">517</span></a>    <span class="k">def</span> <span class="nf">_randomaccess_file_indexer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="open-518"><a href="#open-518"><span class="linenos">518</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="open-519"><a href="#open-519"><span class="linenos">519</span></a><span class="sd">        Indexer for random-access TDLPACK files.</span>
</span><span id="open-520"><a href="#open-520"><span class="linenos">520</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="open-521"><a href="#open-521"><span class="linenos">521</span></a>        <span class="c1"># Read master key</span>
</span><span id="open-522"><a href="#open-522"><span class="linenos">522</span></a>        <span class="n">version</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">nwords</span><span class="p">,</span> <span class="n">nkyrec</span><span class="p">,</span> <span class="n">maxent</span><span class="p">,</span> <span class="n">lastky</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt;iiiiii&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">24</span><span class="p">))</span>
</span><span id="open-523"><a href="#open-523"><span class="linenos">523</span></a>        <span class="n">nbytes</span> <span class="o">=</span> <span class="n">nwords</span><span class="o">*</span><span class="n">NBYPWD</span>
</span><span id="open-524"><a href="#open-524"><span class="linenos">524</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">master_key</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span><span class="n">nids</span><span class="o">=</span><span class="n">nids</span><span class="p">,</span><span class="n">nwords</span><span class="o">=</span><span class="n">nwords</span><span class="p">,</span>
</span><span id="open-525"><a href="#open-525"><span class="linenos">525</span></a>                               <span class="n">nkyrec</span><span class="o">=</span><span class="n">nkyrec</span><span class="p">,</span><span class="n">maxent</span><span class="o">=</span><span class="n">maxent</span><span class="p">,</span><span class="n">lastky</span><span class="o">=</span><span class="n">lastky</span><span class="p">)</span>
</span><span id="open-526"><a href="#open-526"><span class="linenos">526</span></a>        <span class="c1"># Set file position to first key record</span>
</span><span id="open-527"><a href="#open-527"><span class="linenos">527</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">nbytes</span><span class="p">)</span>
</span><span id="open-528"><a href="#open-528"><span class="linenos">528</span></a>
</span><span id="open-529"><a href="#open-529"><span class="linenos">529</span></a>        <span class="n">last_station</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="open-530"><a href="#open-530"><span class="linenos">530</span></a>
</span><span id="open-531"><a href="#open-531"><span class="linenos">531</span></a>        <span class="c1"># Iterate over all key records</span>
</span><span id="open-532"><a href="#open-532"><span class="linenos">532</span></a>        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="open-533"><a href="#open-533"><span class="linenos">533</span></a>
</span><span id="open-534"><a href="#open-534"><span class="linenos">534</span></a>            <span class="c1"># Read key record &quot;header&quot; data</span>
</span><span id="open-535"><a href="#open-535"><span class="linenos">535</span></a>            <span class="n">nkeys</span><span class="p">,</span> <span class="n">nprec_this_key</span><span class="p">,</span> <span class="n">prec_next_key</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt;iii&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">12</span><span class="p">))</span>
</span><span id="open-536"><a href="#open-536"><span class="linenos">536</span></a>
</span><span id="open-537"><a href="#open-537"><span class="linenos">537</span></a>            <span class="n">ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
</span><span id="open-538"><a href="#open-538"><span class="linenos">538</span></a>            <span class="n">nsize</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
</span><span id="open-539"><a href="#open-539"><span class="linenos">539</span></a>            <span class="n">prec_begin</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
</span><span id="open-540"><a href="#open-540"><span class="linenos">540</span></a>
</span><span id="open-541"><a href="#open-541"><span class="linenos">541</span></a>            <span class="c1"># Read key record information</span>
</span><span id="open-542"><a href="#open-542"><span class="linenos">542</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nkeys</span><span class="p">):</span>
</span><span id="open-543"><a href="#open-543"><span class="linenos">543</span></a>                <span class="n">id1</span><span class="p">,</span><span class="n">id2</span><span class="p">,</span><span class="n">id3</span><span class="p">,</span><span class="n">id4</span><span class="p">,</span><span class="n">nd</span><span class="p">,</span><span class="n">bprec</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt;iiiiii&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">24</span><span class="p">))</span>
</span><span id="open-544"><a href="#open-544"><span class="linenos">544</span></a>                <span class="n">ids</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">id1</span><span class="p">,</span><span class="n">id2</span><span class="p">,</span><span class="n">id3</span><span class="p">,</span><span class="n">id4</span><span class="p">])</span>
</span><span id="open-545"><a href="#open-545"><span class="linenos">545</span></a>                <span class="n">nsize</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nd</span><span class="p">)</span>
</span><span id="open-546"><a href="#open-546"><span class="linenos">546</span></a>                <span class="n">prec_begin</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bprec</span><span class="p">)</span>
</span><span id="open-547"><a href="#open-547"><span class="linenos">547</span></a>
</span><span id="open-548"><a href="#open-548"><span class="linenos">548</span></a>            <span class="c1"># Using key record info, move around file to inventory TDLPACK data</span>
</span><span id="open-549"><a href="#open-549"><span class="linenos">549</span></a>            <span class="k">for</span> <span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">b</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">ids</span><span class="p">,</span><span class="n">nsize</span><span class="p">,</span><span class="n">prec_begin</span><span class="p">):</span>
</span><span id="open-550"><a href="#open-550"><span class="linenos">550</span></a>
</span><span id="open-551"><a href="#open-551"><span class="linenos">551</span></a>                <span class="c1"># Disect prec_begin</span>
</span><span id="open-552"><a href="#open-552"><span class="linenos">552</span></a>                <span class="n">prec1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">b</span><span class="o">/</span><span class="mf">1000.0</span><span class="p">)</span>
</span><span id="open-553"><a href="#open-553"><span class="linenos">553</span></a>                <span class="n">nprec</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">b</span><span class="o">-</span><span class="p">(</span><span class="n">prec1</span><span class="o">*</span><span class="mf">1000.0</span><span class="p">))</span>
</span><span id="open-554"><a href="#open-554"><span class="linenos">554</span></a>
</span><span id="open-555"><a href="#open-555"><span class="linenos">555</span></a>                <span class="c1"># Offset to the data record</span>
</span><span id="open-556"><a href="#open-556"><span class="linenos">556</span></a>                <span class="n">offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">prec1</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">nbytes</span>
</span><span id="open-557"><a href="#open-557"><span class="linenos">557</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
</span><span id="open-558"><a href="#open-558"><span class="linenos">558</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;offset&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
</span><span id="open-559"><a href="#open-559"><span class="linenos">559</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="o">*</span><span class="n">NBYPWD</span><span class="p">)</span>
</span><span id="open-560"><a href="#open-560"><span class="linenos">560</span></a>
</span><span id="open-561"><a href="#open-561"><span class="linenos">561</span></a>                <span class="c1"># Determine record type.  Since the 4-word ID is stored in the</span>
</span><span id="open-562"><a href="#open-562"><span class="linenos">562</span></a>                <span class="c1"># key record, we can use it to determine station call letter</span>
</span><span id="open-563"><a href="#open-563"><span class="linenos">563</span></a>                <span class="c1"># record or TDLPACK data record.</span>
</span><span id="open-564"><a href="#open-564"><span class="linenos">564</span></a>                <span class="k">if</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">400001000</span><span class="p">:</span>
</span><span id="open-565"><a href="#open-565"><span class="linenos">565</span></a>                    <span class="c1"># Station ID record...not in TDLPACK format</span>
</span><span id="open-566"><a href="#open-566"><span class="linenos">566</span></a>                    <span class="n">rec</span> <span class="o">=</span> <span class="n">TdlpackStationRecord</span><span class="p">()</span>
</span><span id="open-567"><a href="#open-567"><span class="linenos">567</span></a>                    <span class="n">last_station</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span>
</span><span id="open-568"><a href="#open-568"><span class="linenos">568</span></a>                    <span class="n">rec</span><span class="o">.</span><span class="n">_recnum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span>
</span><span id="open-569"><a href="#open-569"><span class="linenos">569</span></a>                    <span class="n">rec</span><span class="o">.</span><span class="n">_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</span><span id="open-570"><a href="#open-570"><span class="linenos">570</span></a>                    <span class="n">rec</span><span class="o">.</span><span class="n">numberOfStations</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="open-571"><a href="#open-571"><span class="linenos">571</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;record&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rec</span><span class="p">)</span>
</span><span id="open-572"><a href="#open-572"><span class="linenos">572</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;station&#39;</span><span class="p">)</span>
</span><span id="open-573"><a href="#open-573"><span class="linenos">573</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="open-574"><a href="#open-574"><span class="linenos">574</span></a>                    <span class="c1"># TDLPACK data record</span>
</span><span id="open-575"><a href="#open-575"><span class="linenos">575</span></a>                    <span class="n">ipack</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">132</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;&gt;i4&#39;</span><span class="p">)</span>
</span><span id="open-576"><a href="#open-576"><span class="linenos">576</span></a>                    <span class="n">is0</span><span class="p">,</span> <span class="n">is1</span><span class="p">,</span> <span class="n">is2</span><span class="p">,</span> <span class="n">is4</span><span class="p">,</span> <span class="n">ier</span> <span class="o">=</span> <span class="n">tdlpacklib</span><span class="o">.</span><span class="n">unpack_meta_wrapper</span><span class="p">(</span><span class="n">ipack</span><span class="p">,</span><span class="n">ND7</span><span class="p">)</span>
</span><span id="open-577"><a href="#open-577"><span class="linenos">577</span></a>                    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">is2</span><span class="o">==</span><span class="mi">0</span><span class="p">):</span> <span class="n">is2</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="open-578"><a href="#open-578"><span class="linenos">578</span></a>                    <span class="n">rec</span> <span class="o">=</span> <span class="n">TdlpackRecord</span><span class="p">(</span><span class="n">is0</span><span class="p">,</span><span class="n">is1</span><span class="p">,</span><span class="n">is2</span><span class="p">,</span><span class="n">is4</span><span class="p">)</span>
</span><span id="open-579"><a href="#open-579"><span class="linenos">579</span></a>                    <span class="n">rec</span><span class="o">.</span><span class="n">_recnum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span>
</span><span id="open-580"><a href="#open-580"><span class="linenos">580</span></a>                    <span class="n">rec</span><span class="o">.</span><span class="n">_linked_station_record</span> <span class="o">=</span> <span class="n">last_station</span>
</span><span id="open-581"><a href="#open-581"><span class="linenos">581</span></a>                    <span class="n">rec</span><span class="o">.</span><span class="n">_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</span><span id="open-582"><a href="#open-582"><span class="linenos">582</span></a>                    <span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="n">rec</span><span class="o">.</span><span class="n">ny</span><span class="p">,</span><span class="n">rec</span><span class="o">.</span><span class="n">nx</span><span class="p">)</span> <span class="k">if</span> <span class="n">rec</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">&#39;grid&#39;</span> <span class="k">else</span> <span class="p">(</span><span class="n">rec</span><span class="o">.</span><span class="n">numberOfPackedValues</span><span class="p">,)</span>
</span><span id="open-583"><a href="#open-583"><span class="linenos">583</span></a>                    <span class="n">ndim</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span>
</span><span id="open-584"><a href="#open-584"><span class="linenos">584</span></a>                    <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;float32&#39;</span>
</span><span id="open-585"><a href="#open-585"><span class="linenos">585</span></a>                    <span class="n">rec</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">TdlpackRecordOnDiskArray</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span><span class="n">ndim</span><span class="p">,</span><span class="n">dtype</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">filetype</span><span class="p">,</span>
</span><span id="open-586"><a href="#open-586"><span class="linenos">586</span></a>                                                         <span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="p">,</span><span class="n">rec</span><span class="p">,</span>
</span><span id="open-587"><a href="#open-587"><span class="linenos">587</span></a>                                                         <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;offset&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
</span><span id="open-588"><a href="#open-588"><span class="linenos">588</span></a>                                                         <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="open-589"><a href="#open-589"><span class="linenos">589</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;record&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rec</span><span class="p">)</span>
</span><span id="open-590"><a href="#open-590"><span class="linenos">590</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
</span><span id="open-591"><a href="#open-591"><span class="linenos">591</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">records</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="open-592"><a href="#open-592"><span class="linenos">592</span></a>
</span><span id="open-593"><a href="#open-593"><span class="linenos">593</span></a>            <span class="c1"># Hold the record number of the last station ID record</span>
</span><span id="open-594"><a href="#open-594"><span class="linenos">594</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;station&#39;</span><span class="p">:</span>
</span><span id="open-595"><a href="#open-595"><span class="linenos">595</span></a>                <span class="n">_last_station_id_record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span> <span class="c1"># This should be OK.</span>
</span><span id="open-596"><a href="#open-596"><span class="linenos">596</span></a>
</span><span id="open-597"><a href="#open-597"><span class="linenos">597</span></a>            <span class="c1"># Break loop here, at last key record</span>
</span><span id="open-598"><a href="#open-598"><span class="linenos">598</span></a>            <span class="k">if</span> <span class="n">prec_next_key</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">9999</span><span class="p">,</span><span class="mi">99999999</span><span class="p">]:</span> <span class="k">break</span>
</span><span id="open-599"><a href="#open-599"><span class="linenos">599</span></a>            <span class="n">offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">prec_next_key</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">nbytes</span>
</span><span id="open-600"><a href="#open-600"><span class="linenos">600</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
</span><span id="open-601"><a href="#open-601"><span class="linenos">601</span></a>
</span><span id="open-602"><a href="#open-602"><span class="linenos">602</span></a>    <span class="k">def</span> <span class="nf">_sequential_file_indexer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="open-603"><a href="#open-603"><span class="linenos">603</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="open-604"><a href="#open-604"><span class="linenos">604</span></a><span class="sd">        Indexer for sequential TDLPACK files.</span>
</span><span id="open-605"><a href="#open-605"><span class="linenos">605</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="open-606"><a href="#open-606"><span class="linenos">606</span></a>        <span class="n">last_station</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="open-607"><a href="#open-607"><span class="linenos">607</span></a>        <span class="c1"># Iterate</span>
</span><span id="open-608"><a href="#open-608"><span class="linenos">608</span></a>        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="open-609"><a href="#open-609"><span class="linenos">609</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="open-610"><a href="#open-610"><span class="linenos">610</span></a>                <span class="c1"># First read 4-byte Fortran record header</span>
</span><span id="open-611"><a href="#open-611"><span class="linenos">611</span></a>                <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span>
</span><span id="open-612"><a href="#open-612"><span class="linenos">612</span></a>                <span class="n">fortran_header</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt;i&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="open-613"><a href="#open-613"><span class="linenos">613</span></a>                <span class="k">if</span> <span class="n">fortran_header</span> <span class="o">&gt;=</span> <span class="mi">132</span><span class="p">:</span>
</span><span id="open-614"><a href="#open-614"><span class="linenos">614</span></a>                    <span class="n">bytes_to_read</span> <span class="o">=</span> <span class="mi">132</span>
</span><span id="open-615"><a href="#open-615"><span class="linenos">615</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="open-616"><a href="#open-616"><span class="linenos">616</span></a>                    <span class="n">bytes_to_read</span> <span class="o">=</span> <span class="n">fortran_header</span>
</span><span id="open-617"><a href="#open-617"><span class="linenos">617</span></a>
</span><span id="open-618"><a href="#open-618"><span class="linenos">618</span></a>                <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span>
</span><span id="open-619"><a href="#open-619"><span class="linenos">619</span></a>                <span class="n">ioctet</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;&gt;i8&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="open-620"><a href="#open-620"><span class="linenos">620</span></a>                <span class="n">ipack</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">bytes_to_read</span><span class="o">-</span><span class="mi">8</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;&gt;i4&#39;</span><span class="p">)</span>
</span><span id="open-621"><a href="#open-621"><span class="linenos">621</span></a>                <span class="n">_header</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt;4s&#39;</span><span class="p">,</span><span class="n">ipack</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
</span><span id="open-622"><a href="#open-622"><span class="linenos">622</span></a>
</span><span id="open-623"><a href="#open-623"><span class="linenos">623</span></a>                <span class="c1"># Check to first 4 bytes of the data record to determine the data</span>
</span><span id="open-624"><a href="#open-624"><span class="linenos">624</span></a>                <span class="c1"># record type.</span>
</span><span id="open-625"><a href="#open-625"><span class="linenos">625</span></a>                <span class="k">if</span> <span class="n">_header</span> <span class="o">==</span> <span class="s1">&#39;PLDT&#39;</span><span class="p">:</span>
</span><span id="open-626"><a href="#open-626"><span class="linenos">626</span></a>                    <span class="c1"># TDLPACK data record</span>
</span><span id="open-627"><a href="#open-627"><span class="linenos">627</span></a>                    <span class="n">is0</span><span class="p">,</span> <span class="n">is1</span><span class="p">,</span> <span class="n">is2</span><span class="p">,</span> <span class="n">is4</span><span class="p">,</span> <span class="n">ier</span> <span class="o">=</span> <span class="n">tdlpacklib</span><span class="o">.</span><span class="n">unpack_meta_wrapper</span><span class="p">(</span><span class="n">ipack</span><span class="p">,</span><span class="n">ND7</span><span class="p">)</span>
</span><span id="open-628"><a href="#open-628"><span class="linenos">628</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;offset&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
</span><span id="open-629"><a href="#open-629"><span class="linenos">629</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fortran_header</span><span class="p">)</span> <span class="c1"># Size given by Fortran header</span>
</span><span id="open-630"><a href="#open-630"><span class="linenos">630</span></a>                    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">is2</span><span class="o">==</span><span class="mi">0</span><span class="p">):</span> <span class="n">is2</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="open-631"><a href="#open-631"><span class="linenos">631</span></a>                    <span class="n">rec</span> <span class="o">=</span> <span class="n">TdlpackRecord</span><span class="p">(</span><span class="n">is0</span><span class="p">,</span><span class="n">is1</span><span class="p">,</span><span class="n">is2</span><span class="p">,</span><span class="n">is4</span><span class="p">)</span>
</span><span id="open-632"><a href="#open-632"><span class="linenos">632</span></a>                    <span class="n">rec</span><span class="o">.</span><span class="n">_recnum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span>
</span><span id="open-633"><a href="#open-633"><span class="linenos">633</span></a>                    <span class="n">rec</span><span class="o">.</span><span class="n">_linked_station_record</span> <span class="o">=</span> <span class="n">last_station</span>
</span><span id="open-634"><a href="#open-634"><span class="linenos">634</span></a>                    <span class="n">rec</span><span class="o">.</span><span class="n">_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</span><span id="open-635"><a href="#open-635"><span class="linenos">635</span></a>                    <span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="n">rec</span><span class="o">.</span><span class="n">ny</span><span class="p">,</span><span class="n">rec</span><span class="o">.</span><span class="n">nx</span><span class="p">)</span> <span class="k">if</span> <span class="n">rec</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">&#39;grid&#39;</span> <span class="k">else</span> <span class="p">(</span><span class="n">rec</span><span class="o">.</span><span class="n">numberOfPackedValues</span><span class="p">,)</span>
</span><span id="open-636"><a href="#open-636"><span class="linenos">636</span></a>                    <span class="n">ndim</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span>
</span><span id="open-637"><a href="#open-637"><span class="linenos">637</span></a>                    <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;float32&#39;</span>
</span><span id="open-638"><a href="#open-638"><span class="linenos">638</span></a>                    <span class="n">rec</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">TdlpackRecordOnDiskArray</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span><span class="n">ndim</span><span class="p">,</span><span class="n">dtype</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">filetype</span><span class="p">,</span>
</span><span id="open-639"><a href="#open-639"><span class="linenos">639</span></a>                                                         <span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="p">,</span><span class="n">rec</span><span class="p">,</span>
</span><span id="open-640"><a href="#open-640"><span class="linenos">640</span></a>                                                         <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;offset&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
</span><span id="open-641"><a href="#open-641"><span class="linenos">641</span></a>                                                         <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="open-642"><a href="#open-642"><span class="linenos">642</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;record&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rec</span><span class="p">)</span>
</span><span id="open-643"><a href="#open-643"><span class="linenos">643</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
</span><span id="open-644"><a href="#open-644"><span class="linenos">644</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="open-645"><a href="#open-645"><span class="linenos">645</span></a>                    <span class="k">if</span> <span class="n">ioctet</span> <span class="o">==</span> <span class="mi">24</span> <span class="ow">and</span> <span class="n">ipack</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="mi">9999</span><span class="p">:</span>
</span><span id="open-646"><a href="#open-646"><span class="linenos">646</span></a>                        <span class="c1"># Trailer record</span>
</span><span id="open-647"><a href="#open-647"><span class="linenos">647</span></a>                        <span class="n">rec</span> <span class="o">=</span> <span class="n">TdlpackTrailerRecord</span><span class="p">()</span>
</span><span id="open-648"><a href="#open-648"><span class="linenos">648</span></a>                        <span class="n">rec</span><span class="o">.</span><span class="n">_recnum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span>
</span><span id="open-649"><a href="#open-649"><span class="linenos">649</span></a>                        <span class="n">rec</span><span class="o">.</span><span class="n">_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</span><span id="open-650"><a href="#open-650"><span class="linenos">650</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;offset&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
</span><span id="open-651"><a href="#open-651"><span class="linenos">651</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fortran_header</span><span class="p">)</span>
</span><span id="open-652"><a href="#open-652"><span class="linenos">652</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;trailer&#39;</span><span class="p">)</span>
</span><span id="open-653"><a href="#open-653"><span class="linenos">653</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;record&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rec</span><span class="p">)</span>
</span><span id="open-654"><a href="#open-654"><span class="linenos">654</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="open-655"><a href="#open-655"><span class="linenos">655</span></a>                        <span class="c1"># Station ID record</span>
</span><span id="open-656"><a href="#open-656"><span class="linenos">656</span></a>                        <span class="n">rec</span> <span class="o">=</span> <span class="n">TdlpackStationRecord</span><span class="p">()</span>
</span><span id="open-657"><a href="#open-657"><span class="linenos">657</span></a>                        <span class="n">last_station</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span>
</span><span id="open-658"><a href="#open-658"><span class="linenos">658</span></a>                        <span class="n">rec</span><span class="o">.</span><span class="n">_recnum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span>
</span><span id="open-659"><a href="#open-659"><span class="linenos">659</span></a>                        <span class="n">rec</span><span class="o">.</span><span class="n">_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</span><span id="open-660"><a href="#open-660"><span class="linenos">660</span></a>                        <span class="n">rec</span><span class="o">.</span><span class="n">numberOfStations</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ioctet</span><span class="o">/</span><span class="mi">8</span><span class="p">)</span>
</span><span id="open-661"><a href="#open-661"><span class="linenos">661</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;offset&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
</span><span id="open-662"><a href="#open-662"><span class="linenos">662</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fortran_header</span><span class="p">)</span>
</span><span id="open-663"><a href="#open-663"><span class="linenos">663</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;station&#39;</span><span class="p">)</span>
</span><span id="open-664"><a href="#open-664"><span class="linenos">664</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;record&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rec</span><span class="p">)</span>
</span><span id="open-665"><a href="#open-665"><span class="linenos">665</span></a>
</span><span id="open-666"><a href="#open-666"><span class="linenos">666</span></a>                <span class="c1"># At this point we have successfully identified a TDLPACK record from</span>
</span><span id="open-667"><a href="#open-667"><span class="linenos">667</span></a>                <span class="c1"># the file. Increment self.records and position the file pointer to</span>
</span><span id="open-668"><a href="#open-668"><span class="linenos">668</span></a>                <span class="c1"># now read the Fortran trailer.</span>
</span><span id="open-669"><a href="#open-669"><span class="linenos">669</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">records</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1"># Includes trailer records</span>
</span><span id="open-670"><a href="#open-670"><span class="linenos">670</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">fortran_header</span><span class="o">-</span><span class="n">bytes_to_read</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
</span><span id="open-671"><a href="#open-671"><span class="linenos">671</span></a>                <span class="n">fortran_trailer</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt;i&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="open-672"><a href="#open-672"><span class="linenos">672</span></a>
</span><span id="open-673"><a href="#open-673"><span class="linenos">673</span></a>                <span class="c1"># Check Fortran header and trailer for the record.</span>
</span><span id="open-674"><a href="#open-674"><span class="linenos">674</span></a>                <span class="k">if</span> <span class="n">fortran_header</span> <span class="o">!=</span> <span class="n">fortran_trailer</span><span class="p">:</span>
</span><span id="open-675"><a href="#open-675"><span class="linenos">675</span></a>                    <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s1">&#39;Bad Fortran record.&#39;</span><span class="p">)</span>
</span><span id="open-676"><a href="#open-676"><span class="linenos">676</span></a>
</span><span id="open-677"><a href="#open-677"><span class="linenos">677</span></a>                <span class="c1"># Hold the record number of the last station ID record</span>
</span><span id="open-678"><a href="#open-678"><span class="linenos">678</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;station&#39;</span><span class="p">:</span>
</span><span id="open-679"><a href="#open-679"><span class="linenos">679</span></a>                    <span class="n">_last_station_id_record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span> <span class="c1"># This should be OK.</span>
</span><span id="open-680"><a href="#open-680"><span class="linenos">680</span></a>
</span><span id="open-681"><a href="#open-681"><span class="linenos">681</span></a>            <span class="k">except</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">error</span><span class="p">):</span>
</span><span id="open-682"><a href="#open-682"><span class="linenos">682</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="open-683"><a href="#open-683"><span class="linenos">683</span></a>                <span class="k">break</span>
</span><span id="open-684"><a href="#open-684"><span class="linenos">684</span></a>
</span><span id="open-685"><a href="#open-685"><span class="linenos">685</span></a>    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
</span><span id="open-686"><a href="#open-686"><span class="linenos">686</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="open-687"><a href="#open-687"><span class="linenos">687</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="open-688"><a href="#open-688"><span class="linenos">688</span></a>        <span class="k">if</span> <span class="s1">&#39;w&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">:</span> <span class="k">pass</span> <span class="c1"># Remove this at some point....</span>
</span><span id="open-689"><a href="#open-689"><span class="linenos">689</span></a>        <span class="c1"># Position file pointer to the beginning of the TDLPACK record.</span>
</span><span id="open-690"><a href="#open-690"><span class="linenos">690</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;offset&#39;</span><span class="p">][</span><span class="n">n</span><span class="p">])</span>
</span><span id="open-691"><a href="#open-691"><span class="linenos">691</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">filetype</span> <span class="o">==</span> <span class="s1">&#39;sequential&#39;</span><span class="p">:</span>
</span><span id="open-692"><a href="#open-692"><span class="linenos">692</span></a>            <span class="n">size</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;&gt;i8&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="open-693"><a href="#open-693"><span class="linenos">693</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">filetype</span> <span class="o">==</span> <span class="s1">&#39;random-access&#39;</span><span class="p">:</span>
</span><span id="open-694"><a href="#open-694"><span class="linenos">694</span></a>            <span class="n">size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">][</span><span class="n">n</span><span class="p">]</span>
</span><span id="open-695"><a href="#open-695"><span class="linenos">695</span></a>
</span><span id="open-696"><a href="#open-696"><span class="linenos">696</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">][</span><span class="n">n</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">,</span><span class="s1">&#39;trailer&#39;</span><span class="p">]:</span>
</span><span id="open-697"><a href="#open-697"><span class="linenos">697</span></a>            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">size</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;&gt;i4&#39;</span><span class="p">)</span>
</span><span id="open-698"><a href="#open-698"><span class="linenos">698</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">][</span><span class="n">n</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;station&#39;</span><span class="p">:</span>
</span><span id="open-699"><a href="#open-699"><span class="linenos">699</span></a>            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">size</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;S8&#39;</span><span class="p">)</span>
</span><span id="open-700"><a href="#open-700"><span class="linenos">700</span></a>
</span><span id="open-701"><a href="#open-701"><span class="linenos">701</span></a>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
</span><span id="open-702"><a href="#open-702"><span class="linenos">702</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="open-703"><a href="#open-703"><span class="linenos">703</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="open-704"><a href="#open-704"><span class="linenos">704</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">record</span><span class="p">,</span><span class="nb">list</span><span class="p">):</span>
</span><span id="open-705"><a href="#open-705"><span class="linenos">705</span></a>            <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
</span><span id="open-706"><a href="#open-706"><span class="linenos">706</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">rec</span><span class="p">)</span>
</span><span id="open-707"><a href="#open-707"><span class="linenos">707</span></a>            <span class="k">return</span>
</span><span id="open-708"><a href="#open-708"><span class="linenos">708</span></a>
</span><span id="open-709"><a href="#open-709"><span class="linenos">709</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">filetype</span> <span class="o">==</span> <span class="s1">&#39;random-access&#39;</span><span class="p">:</span>
</span><span id="open-710"><a href="#open-710"><span class="linenos">710</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">record</span><span class="p">,</span><span class="s1">&#39;_ipack&#39;</span><span class="p">):</span> <span class="n">record</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
</span><span id="open-711"><a href="#open-711"><span class="linenos">711</span></a>            <span class="n">nreplace</span><span class="p">,</span> <span class="n">ncheck</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
</span><span id="open-712"><a href="#open-712"><span class="linenos">712</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">record</span><span class="p">,</span><span class="n">TdlpackStationRecord</span><span class="p">):</span>
</span><span id="open-713"><a href="#open-713"><span class="linenos">713</span></a>                <span class="n">ipack</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">((</span><span class="n">record</span><span class="o">.</span><span class="n">numberOfStations</span><span class="o">*</span><span class="mi">2</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;S4&#39;</span><span class="p">)</span>
</span><span id="open-714"><a href="#open-714"><span class="linenos">714</span></a>                <span class="k">for</span> <span class="n">n</span><span class="p">,</span><span class="n">s</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">stations</span><span class="p">):</span>
</span><span id="open-715"><a href="#open-715"><span class="linenos">715</span></a>                    <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
</span><span id="open-716"><a href="#open-716"><span class="linenos">716</span></a>                    <span class="n">ipack</span><span class="p">[</span><span class="n">n</span><span class="o">*</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>
</span><span id="open-717"><a href="#open-717"><span class="linenos">717</span></a>                    <span class="n">ipack</span><span class="p">[(</span><span class="n">n</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span>
</span><span id="open-718"><a href="#open-718"><span class="linenos">718</span></a>                <span class="nb">print</span><span class="p">(</span><span class="n">ipack</span><span class="p">)</span>
</span><span id="open-719"><a href="#open-719"><span class="linenos">719</span></a>                <span class="n">ier</span> <span class="o">=</span> <span class="n">tdlpacklib</span><span class="o">.</span><span class="n">writera_char</span><span class="p">(</span><span class="n">FORTRAN_STDOUT_LUN</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_lun</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">record</span><span class="o">.</span><span class="n">id</span><span class="p">,</span><span class="n">ipack</span><span class="p">,</span><span class="n">nreplace</span><span class="p">,</span><span class="n">ncheck</span><span class="p">)</span>
</span><span id="open-720"><a href="#open-720"><span class="linenos">720</span></a>            <span class="k">elif</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span><span class="n">_TdlpackRecord</span><span class="p">):</span>
</span><span id="open-721"><a href="#open-721"><span class="linenos">721</span></a>                <span class="n">ier</span> <span class="o">=</span> <span class="n">tdlpacklib</span><span class="o">.</span><span class="n">writefile</span><span class="p">(</span><span class="n">FORTRAN_STDOUT_LUN</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_lun</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">record</span><span class="o">.</span><span class="n">_ipack</span><span class="p">,</span><span class="n">nreplace</span><span class="o">=</span><span class="n">nreplace</span><span class="p">,</span><span class="n">ncheck</span><span class="o">=</span><span class="n">ncheck</span><span class="p">)</span>
</span><span id="open-722"><a href="#open-722"><span class="linenos">722</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">filetype</span> <span class="o">==</span> <span class="s1">&#39;sequential&#39;</span><span class="p">:</span>
</span><span id="open-723"><a href="#open-723"><span class="linenos">723</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">record</span><span class="p">,</span><span class="n">TdlpackStationRecord</span><span class="p">):</span>
</span><span id="open-724"><a href="#open-724"><span class="linenos">724</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_lastrecord_written</span> <span class="o">!=</span> <span class="s1">&#39;trailer&#39;</span><span class="p">:</span>
</span><span id="open-725"><a href="#open-725"><span class="linenos">725</span></a>                    <span class="n">ier</span> <span class="o">=</span> <span class="n">tdlpacklib</span><span class="o">.</span><span class="n">trail</span><span class="p">(</span><span class="n">FORTRAN_STDOUT_LUN</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_lun</span><span class="p">,</span><span class="n">L3264B</span><span class="p">,</span><span class="n">L3264W</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">bytes_written</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">records_written</span><span class="p">)</span>
</span><span id="open-726"><a href="#open-726"><span class="linenos">726</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_type_lastrecord_written</span> <span class="o">=</span> <span class="s1">&#39;trailer&#39;</span>
</span><span id="open-727"><a href="#open-727"><span class="linenos">727</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">records</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="open-728"><a href="#open-728"><span class="linenos">728</span></a>                <span class="n">ipack</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="n">NCHAR</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">stations</span><span class="p">]</span>
</span><span id="open-729"><a href="#open-729"><span class="linenos">729</span></a>                <span class="n">ntotby</span><span class="p">,</span> <span class="n">ntotrc</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
</span><span id="open-730"><a href="#open-730"><span class="linenos">730</span></a>                <span class="n">ntotby</span><span class="p">,</span> <span class="n">ntotrc</span><span class="p">,</span> <span class="n">ier</span> <span class="o">=</span> <span class="n">tdlpacklib</span><span class="o">.</span><span class="n">writesq_station_record</span><span class="p">(</span><span class="n">FORTRAN_STDOUT_LUN</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_lun</span><span class="p">,</span><span class="n">ipack</span><span class="p">,</span><span class="n">ntotby</span><span class="p">,</span><span class="n">ntotrc</span><span class="p">)</span>
</span><span id="open-731"><a href="#open-731"><span class="linenos">731</span></a>            <span class="k">elif</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span><span class="n">_TdlpackRecord</span><span class="p">):</span>
</span><span id="open-732"><a href="#open-732"><span class="linenos">732</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">record</span><span class="p">,</span><span class="s1">&#39;_ipack&#39;</span><span class="p">):</span> <span class="n">record</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
</span><span id="open-733"><a href="#open-733"><span class="linenos">733</span></a>                <span class="n">ier</span> <span class="o">=</span> <span class="n">tdlpacklib</span><span class="o">.</span><span class="n">writefile</span><span class="p">(</span><span class="n">FORTRAN_STDOUT_LUN</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_lun</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">record</span><span class="o">.</span><span class="n">_ipack</span><span class="p">)</span>
</span><span id="open-734"><a href="#open-734"><span class="linenos">734</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">record</span><span class="p">,</span><span class="n">TdlpackTrailerRecord</span><span class="p">):</span>
</span><span id="open-735"><a href="#open-735"><span class="linenos">735</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">record</span><span class="p">,</span><span class="s1">&#39;_ipack&#39;</span><span class="p">):</span> <span class="n">record</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
</span><span id="open-736"><a href="#open-736"><span class="linenos">736</span></a>                <span class="n">ier</span> <span class="o">=</span> <span class="n">tdlpacklib</span><span class="o">.</span><span class="n">writefile</span><span class="p">(</span><span class="n">FORTRAN_STDOUT_LUN</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_lun</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">record</span><span class="o">.</span><span class="n">_ipack</span><span class="p">)</span>
</span><span id="open-737"><a href="#open-737"><span class="linenos">737</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_type_lastrecord_written</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">type</span>
</span><span id="open-738"><a href="#open-738"><span class="linenos">738</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">records</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="open-739"><a href="#open-739"><span class="linenos">739</span></a>
</span><span id="open-740"><a href="#open-740"><span class="linenos">740</span></a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="open-741"><a href="#open-741"><span class="linenos">741</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="open-742"><a href="#open-742"><span class="linenos">742</span></a><span class="sd">        Close the file handle</span>
</span><span id="open-743"><a href="#open-743"><span class="linenos">743</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="open-744"><a href="#open-744"><span class="linenos">744</span></a>        <span class="k">if</span> <span class="s1">&#39;w&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">:</span>
</span><span id="open-745"><a href="#open-745"><span class="linenos">745</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">filetype</span> <span class="o">==</span> <span class="s1">&#39;sequential&#39;</span><span class="p">:</span>
</span><span id="open-746"><a href="#open-746"><span class="linenos">746</span></a>                <span class="n">filetype</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="open-747"><a href="#open-747"><span class="linenos">747</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_lastrecord_written</span> <span class="o">==</span> <span class="s1">&#39;vector&#39;</span><span class="p">:</span>
</span><span id="open-748"><a href="#open-748"><span class="linenos">748</span></a>                    <span class="n">ier</span> <span class="o">=</span> <span class="n">tdlpacklib</span><span class="o">.</span><span class="n">trail</span><span class="p">(</span><span class="n">FORTRAN_STDOUT_LUN</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_lun</span><span class="p">,</span><span class="n">L3264B</span><span class="p">,</span><span class="n">L3264W</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">bytes_written</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">records_written</span><span class="p">)</span>
</span><span id="open-749"><a href="#open-749"><span class="linenos">749</span></a>            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">filetype</span> <span class="o">==</span> <span class="s1">&#39;random-access&#39;</span><span class="p">:</span>
</span><span id="open-750"><a href="#open-750"><span class="linenos">750</span></a>                <span class="n">filetype</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="open-751"><a href="#open-751"><span class="linenos">751</span></a>            <span class="n">ier</span> <span class="o">=</span> <span class="n">tdlpacklib</span><span class="o">.</span><span class="n">closefile</span><span class="p">(</span><span class="n">FORTRAN_STDOUT_LUN</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_lun</span><span class="p">,</span><span class="n">filetype</span><span class="p">)</span>
</span><span id="open-752"><a href="#open-752"><span class="linenos">752</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;_filehandle&#39;</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="open-753"><a href="#open-753"><span class="linenos">753</span></a>        <span class="k">del</span> <span class="n">_open_file_store</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
</span><span id="open-754"><a href="#open-754"><span class="linenos">754</span></a>
</span><span id="open-755"><a href="#open-755"><span class="linenos">755</span></a>    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="open-756"><a href="#open-756"><span class="linenos">756</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="open-757"><a href="#open-757"><span class="linenos">757</span></a><span class="sd">        Select TDLPACK records by `TdlpackRecord` attributes.</span>
</span><span id="open-758"><a href="#open-758"><span class="linenos">758</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="open-759"><a href="#open-759"><span class="linenos">759</span></a>        <span class="c1"># TODO: Added ability to process multiple values for each keyword (attribute)</span>
</span><span id="open-760"><a href="#open-760"><span class="linenos">760</span></a>        <span class="n">idxs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="open-761"><a href="#open-761"><span class="linenos">761</span></a>        <span class="n">nkeys</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="open-762"><a href="#open-762"><span class="linenos">762</span></a>        <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="open-763"><a href="#open-763"><span class="linenos">763</span></a>            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;record&#39;</span><span class="p">]:</span>
</span><span id="open-764"><a href="#open-764"><span class="linenos">764</span></a>                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="n">k</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="n">k</span><span class="p">)</span> <span class="o">==</span> <span class="n">v</span><span class="p">:</span> <span class="n">idxs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">_recnum</span><span class="p">)</span>
</span><span id="open-765"><a href="#open-765"><span class="linenos">765</span></a>        <span class="n">idxs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">idxs</span><span class="p">,</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;&gt;i4&#39;</span><span class="p">)</span>
</span><span id="open-766"><a href="#open-766"><span class="linenos">766</span></a>        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;record&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="n">ii</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">collections</span><span class="o">.</span><span class="n">Counter</span><span class="p">(</span><span class="n">idxs</span><span class="p">)</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span> <span class="k">if</span> <span class="n">ii</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">nkeys</span><span class="p">]]</span>
</span></pre></div>


            <div class="docstring"><p>Open class for tdlpackio.</p>
</div>


                            <div id="open.__init__" class="classattr">
                                        <input id="open.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">open</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">path</span>, </span><span class="param"><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span>, </span><span class="param"><span class="nb">format</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">ra_template</span><span class="o">=</span><span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="open.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#open.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="open.__init__-405"><a href="#open.__init__-405"><span class="linenos">405</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ra_template</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="open.__init__-406"><a href="#open.__init__-406"><span class="linenos">406</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="open.__init__-407"><a href="#open.__init__-407"><span class="linenos">407</span></a><span class="sd">        Class Constructor</span>
</span><span id="open.__init__-408"><a href="#open.__init__-408"><span class="linenos">408</span></a>
</span><span id="open.__init__-409"><a href="#open.__init__-409"><span class="linenos">409</span></a><span class="sd">        Parameters</span>
</span><span id="open.__init__-410"><a href="#open.__init__-410"><span class="linenos">410</span></a><span class="sd">        ----------</span>
</span><span id="open.__init__-411"><a href="#open.__init__-411"><span class="linenos">411</span></a><span class="sd">        **`path : str`**</span>
</span><span id="open.__init__-412"><a href="#open.__init__-412"><span class="linenos">412</span></a><span class="sd">            File name.</span>
</span><span id="open.__init__-413"><a href="#open.__init__-413"><span class="linenos">413</span></a>
</span><span id="open.__init__-414"><a href="#open.__init__-414"><span class="linenos">414</span></a><span class="sd">        **`mode : str, optional, default = &#39;r&#39;`**</span>
</span><span id="open.__init__-415"><a href="#open.__init__-415"><span class="linenos">415</span></a><span class="sd">            File handle mode.  The default is open for reading (&#39;r&#39;).</span>
</span><span id="open.__init__-416"><a href="#open.__init__-416"><span class="linenos">416</span></a>
</span><span id="open.__init__-417"><a href="#open.__init__-417"><span class="linenos">417</span></a><span class="sd">        **`format : str, optional, default = &#39;sequential&#39;`**</span>
</span><span id="open.__init__-418"><a href="#open.__init__-418"><span class="linenos">418</span></a><span class="sd">            File type when creating a new file.  Valid values are &#39;sequential` </span>
</span><span id="open.__init__-419"><a href="#open.__init__-419"><span class="linenos">419</span></a><span class="sd">            (DEFAULT) or &#39;random-access&#39;.</span>
</span><span id="open.__init__-420"><a href="#open.__init__-420"><span class="linenos">420</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="open.__init__-421"><a href="#open.__init__-421"><span class="linenos">421</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;r&#39;</span> <span class="ow">or</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;w&#39;</span><span class="p">:</span> <span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span><span class="o">+</span><span class="s1">&#39;b&#39;</span>
</span><span id="open.__init__-422"><a href="#open.__init__-422"><span class="linenos">422</span></a>        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;wb&#39;</span>
</span><span id="open.__init__-423"><a href="#open.__init__-423"><span class="linenos">423</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_byteorder</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="open.__init__-424"><a href="#open.__init__-424"><span class="linenos">424</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_hasindex</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="open.__init__-425"><a href="#open.__init__-425"><span class="linenos">425</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_index</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="open.__init__-426"><a href="#open.__init__-426"><span class="linenos">426</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>
</span><span id="open.__init__-427"><a href="#open.__init__-427"><span class="linenos">427</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="open.__init__-428"><a href="#open.__init__-428"><span class="linenos">428</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">records</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="open.__init__-429"><a href="#open.__init__-429"><span class="linenos">429</span></a>
</span><span id="open.__init__-430"><a href="#open.__init__-430"><span class="linenos">430</span></a>        <span class="c1"># Perform indexing on read</span>
</span><span id="open.__init__-431"><a href="#open.__init__-431"><span class="linenos">431</span></a>        <span class="k">if</span> <span class="s1">&#39;r&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">:</span>
</span><span id="open.__init__-432"><a href="#open.__init__-432"><span class="linenos">432</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span> <span class="o">=</span> <span class="n">builtins</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span><span class="n">buffering</span><span class="o">=</span><span class="n">ONE_MB</span><span class="p">)</span>
</span><span id="open.__init__-433"><a href="#open.__init__-433"><span class="linenos">433</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">filetype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_tdlpack_file_type</span><span class="p">()</span>
</span><span id="open.__init__-434"><a href="#open.__init__-434"><span class="linenos">434</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_build_index</span><span class="p">()</span>
</span><span id="open.__init__-435"><a href="#open.__init__-435"><span class="linenos">435</span></a>        <span class="k">elif</span> <span class="s1">&#39;w&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">:</span>
</span><span id="open.__init__-436"><a href="#open.__init__-436"><span class="linenos">436</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">bytes_written</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="open.__init__-437"><a href="#open.__init__-437"><span class="linenos">437</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">records_written</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="open.__init__-438"><a href="#open.__init__-438"><span class="linenos">438</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">filetype</span> <span class="o">=</span> <span class="nb">format</span> <span class="k">if</span> <span class="nb">format</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s1">&#39;sequential&#39;</span>
</span><span id="open.__init__-439"><a href="#open.__init__-439"><span class="linenos">439</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">filetype</span> <span class="o">==</span> <span class="s1">&#39;random-access&#39;</span><span class="p">:</span>
</span><span id="open.__init__-440"><a href="#open.__init__-440"><span class="linenos">440</span></a>                <span class="n">ifiletype</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="open.__init__-441"><a href="#open.__init__-441"><span class="linenos">441</span></a>                <span class="n">ra_template</span> <span class="o">=</span> <span class="s1">&#39;small&#39;</span> <span class="k">if</span> <span class="n">ra_template</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">ra_template</span>
</span><span id="open.__init__-442"><a href="#open.__init__-442"><span class="linenos">442</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_lun</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_byteorder</span><span class="p">,</span><span class="n">ifiletype</span><span class="p">,</span><span class="n">ier</span> <span class="o">=</span> \
</span><span id="open.__init__-443"><a href="#open.__init__-443"><span class="linenos">443</span></a>                <span class="n">tdlpacklib</span><span class="o">.</span><span class="n">openfile</span><span class="p">(</span><span class="n">FORTRAN_STDOUT_LUN</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_byteorder</span><span class="p">,</span><span class="n">ifiletype</span><span class="p">,</span><span class="n">ra_template</span><span class="o">=</span><span class="n">ra_template</span><span class="p">)</span>
</span><span id="open.__init__-444"><a href="#open.__init__-444"><span class="linenos">444</span></a>            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">filetype</span> <span class="o">==</span> <span class="s1">&#39;sequential&#39;</span><span class="p">:</span>
</span><span id="open.__init__-445"><a href="#open.__init__-445"><span class="linenos">445</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span> <span class="o">=</span> <span class="n">builtins</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span><span class="n">buffering</span><span class="o">=</span><span class="n">ONE_MB</span><span class="p">)</span>
</span><span id="open.__init__-446"><a href="#open.__init__-446"><span class="linenos">446</span></a>                <span class="n">ifiletype</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="open.__init__-447"><a href="#open.__init__-447"><span class="linenos">447</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_lun</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_byteorder</span><span class="p">,</span><span class="n">ifiletype</span><span class="p">,</span><span class="n">ier</span> <span class="o">=</span> \
</span><span id="open.__init__-448"><a href="#open.__init__-448"><span class="linenos">448</span></a>                <span class="n">tdlpacklib</span><span class="o">.</span><span class="n">openfile</span><span class="p">(</span><span class="n">FORTRAN_STDOUT_LUN</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_byteorder</span><span class="p">,</span><span class="n">ifiletype</span><span class="p">)</span>
</span><span id="open.__init__-449"><a href="#open.__init__-449"><span class="linenos">449</span></a>
</span><span id="open.__init__-450"><a href="#open.__init__-450"><span class="linenos">450</span></a>        <span class="c1"># Get file size</span>
</span><span id="open.__init__-451"><a href="#open.__init__-451"><span class="linenos">451</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="open.__init__-452"><a href="#open.__init__-452"><span class="linenos">452</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="open.__init__-453"><a href="#open.__init__-453"><span class="linenos">453</span></a>        <span class="k">except</span><span class="p">(</span><span class="ne">FileNotFoundError</span><span class="p">):</span>
</span><span id="open.__init__-454"><a href="#open.__init__-454"><span class="linenos">454</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="open.__init__-455"><a href="#open.__init__-455"><span class="linenos">455</span></a>        <span class="c1"># Add self to file data store</span>
</span><span id="open.__init__-456"><a href="#open.__init__-456"><span class="linenos">456</span></a>        <span class="n">_open_file_store</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Class Constructor</p>

<h2 id="parameters">Parameters</h2>

<p><strong><code>path : str</code></strong>
    File name.</p>

<p><strong><code>mode : str, optional, default = 'r'</code></strong>
    File handle mode.  The default is open for reading ('r').</p>

<p><strong><code>format : str, optional, default = 'sequential'</code></strong>
    File type when creating a new file.  Valid values are 'sequential` 
    (DEFAULT) or 'random-access'.</p>
</div>


                            </div>
                            <div id="open.mode" class="classattr">
                                <div class="attr variable">
            <span class="name">mode</span>

        
    </div>
    <a class="headerlink" href="#open.mode"></a>
    
    

                            </div>
                            <div id="open.name" class="classattr">
                                <div class="attr variable">
            <span class="name">name</span>

        
    </div>
    <a class="headerlink" href="#open.name"></a>
    
    

                            </div>
                            <div id="open.records" class="classattr">
                                <div class="attr variable">
            <span class="name">records</span>

        
    </div>
    <a class="headerlink" href="#open.records"></a>
    
    

                            </div>
                            <div id="open.read" class="classattr">
                                        <input id="open.read-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">read</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">n</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="open.read-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#open.read"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="open.read-685"><a href="#open.read-685"><span class="linenos">685</span></a>    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
</span><span id="open.read-686"><a href="#open.read-686"><span class="linenos">686</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="open.read-687"><a href="#open.read-687"><span class="linenos">687</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="open.read-688"><a href="#open.read-688"><span class="linenos">688</span></a>        <span class="k">if</span> <span class="s1">&#39;w&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">:</span> <span class="k">pass</span> <span class="c1"># Remove this at some point....</span>
</span><span id="open.read-689"><a href="#open.read-689"><span class="linenos">689</span></a>        <span class="c1"># Position file pointer to the beginning of the TDLPACK record.</span>
</span><span id="open.read-690"><a href="#open.read-690"><span class="linenos">690</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;offset&#39;</span><span class="p">][</span><span class="n">n</span><span class="p">])</span>
</span><span id="open.read-691"><a href="#open.read-691"><span class="linenos">691</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">filetype</span> <span class="o">==</span> <span class="s1">&#39;sequential&#39;</span><span class="p">:</span>
</span><span id="open.read-692"><a href="#open.read-692"><span class="linenos">692</span></a>            <span class="n">size</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;&gt;i8&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="open.read-693"><a href="#open.read-693"><span class="linenos">693</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">filetype</span> <span class="o">==</span> <span class="s1">&#39;random-access&#39;</span><span class="p">:</span>
</span><span id="open.read-694"><a href="#open.read-694"><span class="linenos">694</span></a>            <span class="n">size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">][</span><span class="n">n</span><span class="p">]</span>
</span><span id="open.read-695"><a href="#open.read-695"><span class="linenos">695</span></a>
</span><span id="open.read-696"><a href="#open.read-696"><span class="linenos">696</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">][</span><span class="n">n</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">,</span><span class="s1">&#39;trailer&#39;</span><span class="p">]:</span>
</span><span id="open.read-697"><a href="#open.read-697"><span class="linenos">697</span></a>            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">size</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;&gt;i4&#39;</span><span class="p">)</span>
</span><span id="open.read-698"><a href="#open.read-698"><span class="linenos">698</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">][</span><span class="n">n</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;station&#39;</span><span class="p">:</span>
</span><span id="open.read-699"><a href="#open.read-699"><span class="linenos">699</span></a>            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">size</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;S8&#39;</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="open.write" class="classattr">
                                        <input id="open.write-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">write</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">record</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="open.write-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#open.write"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="open.write-701"><a href="#open.write-701"><span class="linenos">701</span></a>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
</span><span id="open.write-702"><a href="#open.write-702"><span class="linenos">702</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="open.write-703"><a href="#open.write-703"><span class="linenos">703</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="open.write-704"><a href="#open.write-704"><span class="linenos">704</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">record</span><span class="p">,</span><span class="nb">list</span><span class="p">):</span>
</span><span id="open.write-705"><a href="#open.write-705"><span class="linenos">705</span></a>            <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
</span><span id="open.write-706"><a href="#open.write-706"><span class="linenos">706</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">rec</span><span class="p">)</span>
</span><span id="open.write-707"><a href="#open.write-707"><span class="linenos">707</span></a>            <span class="k">return</span>
</span><span id="open.write-708"><a href="#open.write-708"><span class="linenos">708</span></a>
</span><span id="open.write-709"><a href="#open.write-709"><span class="linenos">709</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">filetype</span> <span class="o">==</span> <span class="s1">&#39;random-access&#39;</span><span class="p">:</span>
</span><span id="open.write-710"><a href="#open.write-710"><span class="linenos">710</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">record</span><span class="p">,</span><span class="s1">&#39;_ipack&#39;</span><span class="p">):</span> <span class="n">record</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
</span><span id="open.write-711"><a href="#open.write-711"><span class="linenos">711</span></a>            <span class="n">nreplace</span><span class="p">,</span> <span class="n">ncheck</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
</span><span id="open.write-712"><a href="#open.write-712"><span class="linenos">712</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">record</span><span class="p">,</span><span class="n">TdlpackStationRecord</span><span class="p">):</span>
</span><span id="open.write-713"><a href="#open.write-713"><span class="linenos">713</span></a>                <span class="n">ipack</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">((</span><span class="n">record</span><span class="o">.</span><span class="n">numberOfStations</span><span class="o">*</span><span class="mi">2</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;S4&#39;</span><span class="p">)</span>
</span><span id="open.write-714"><a href="#open.write-714"><span class="linenos">714</span></a>                <span class="k">for</span> <span class="n">n</span><span class="p">,</span><span class="n">s</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">stations</span><span class="p">):</span>
</span><span id="open.write-715"><a href="#open.write-715"><span class="linenos">715</span></a>                    <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
</span><span id="open.write-716"><a href="#open.write-716"><span class="linenos">716</span></a>                    <span class="n">ipack</span><span class="p">[</span><span class="n">n</span><span class="o">*</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>
</span><span id="open.write-717"><a href="#open.write-717"><span class="linenos">717</span></a>                    <span class="n">ipack</span><span class="p">[(</span><span class="n">n</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span>
</span><span id="open.write-718"><a href="#open.write-718"><span class="linenos">718</span></a>                <span class="nb">print</span><span class="p">(</span><span class="n">ipack</span><span class="p">)</span>
</span><span id="open.write-719"><a href="#open.write-719"><span class="linenos">719</span></a>                <span class="n">ier</span> <span class="o">=</span> <span class="n">tdlpacklib</span><span class="o">.</span><span class="n">writera_char</span><span class="p">(</span><span class="n">FORTRAN_STDOUT_LUN</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_lun</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">record</span><span class="o">.</span><span class="n">id</span><span class="p">,</span><span class="n">ipack</span><span class="p">,</span><span class="n">nreplace</span><span class="p">,</span><span class="n">ncheck</span><span class="p">)</span>
</span><span id="open.write-720"><a href="#open.write-720"><span class="linenos">720</span></a>            <span class="k">elif</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span><span class="n">_TdlpackRecord</span><span class="p">):</span>
</span><span id="open.write-721"><a href="#open.write-721"><span class="linenos">721</span></a>                <span class="n">ier</span> <span class="o">=</span> <span class="n">tdlpacklib</span><span class="o">.</span><span class="n">writefile</span><span class="p">(</span><span class="n">FORTRAN_STDOUT_LUN</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_lun</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">record</span><span class="o">.</span><span class="n">_ipack</span><span class="p">,</span><span class="n">nreplace</span><span class="o">=</span><span class="n">nreplace</span><span class="p">,</span><span class="n">ncheck</span><span class="o">=</span><span class="n">ncheck</span><span class="p">)</span>
</span><span id="open.write-722"><a href="#open.write-722"><span class="linenos">722</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">filetype</span> <span class="o">==</span> <span class="s1">&#39;sequential&#39;</span><span class="p">:</span>
</span><span id="open.write-723"><a href="#open.write-723"><span class="linenos">723</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">record</span><span class="p">,</span><span class="n">TdlpackStationRecord</span><span class="p">):</span>
</span><span id="open.write-724"><a href="#open.write-724"><span class="linenos">724</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_lastrecord_written</span> <span class="o">!=</span> <span class="s1">&#39;trailer&#39;</span><span class="p">:</span>
</span><span id="open.write-725"><a href="#open.write-725"><span class="linenos">725</span></a>                    <span class="n">ier</span> <span class="o">=</span> <span class="n">tdlpacklib</span><span class="o">.</span><span class="n">trail</span><span class="p">(</span><span class="n">FORTRAN_STDOUT_LUN</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_lun</span><span class="p">,</span><span class="n">L3264B</span><span class="p">,</span><span class="n">L3264W</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">bytes_written</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">records_written</span><span class="p">)</span>
</span><span id="open.write-726"><a href="#open.write-726"><span class="linenos">726</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_type_lastrecord_written</span> <span class="o">=</span> <span class="s1">&#39;trailer&#39;</span>
</span><span id="open.write-727"><a href="#open.write-727"><span class="linenos">727</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">records</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="open.write-728"><a href="#open.write-728"><span class="linenos">728</span></a>                <span class="n">ipack</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="n">NCHAR</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">stations</span><span class="p">]</span>
</span><span id="open.write-729"><a href="#open.write-729"><span class="linenos">729</span></a>                <span class="n">ntotby</span><span class="p">,</span> <span class="n">ntotrc</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
</span><span id="open.write-730"><a href="#open.write-730"><span class="linenos">730</span></a>                <span class="n">ntotby</span><span class="p">,</span> <span class="n">ntotrc</span><span class="p">,</span> <span class="n">ier</span> <span class="o">=</span> <span class="n">tdlpacklib</span><span class="o">.</span><span class="n">writesq_station_record</span><span class="p">(</span><span class="n">FORTRAN_STDOUT_LUN</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_lun</span><span class="p">,</span><span class="n">ipack</span><span class="p">,</span><span class="n">ntotby</span><span class="p">,</span><span class="n">ntotrc</span><span class="p">)</span>
</span><span id="open.write-731"><a href="#open.write-731"><span class="linenos">731</span></a>            <span class="k">elif</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span><span class="n">_TdlpackRecord</span><span class="p">):</span>
</span><span id="open.write-732"><a href="#open.write-732"><span class="linenos">732</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">record</span><span class="p">,</span><span class="s1">&#39;_ipack&#39;</span><span class="p">):</span> <span class="n">record</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
</span><span id="open.write-733"><a href="#open.write-733"><span class="linenos">733</span></a>                <span class="n">ier</span> <span class="o">=</span> <span class="n">tdlpacklib</span><span class="o">.</span><span class="n">writefile</span><span class="p">(</span><span class="n">FORTRAN_STDOUT_LUN</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_lun</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">record</span><span class="o">.</span><span class="n">_ipack</span><span class="p">)</span>
</span><span id="open.write-734"><a href="#open.write-734"><span class="linenos">734</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">record</span><span class="p">,</span><span class="n">TdlpackTrailerRecord</span><span class="p">):</span>
</span><span id="open.write-735"><a href="#open.write-735"><span class="linenos">735</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">record</span><span class="p">,</span><span class="s1">&#39;_ipack&#39;</span><span class="p">):</span> <span class="n">record</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
</span><span id="open.write-736"><a href="#open.write-736"><span class="linenos">736</span></a>                <span class="n">ier</span> <span class="o">=</span> <span class="n">tdlpacklib</span><span class="o">.</span><span class="n">writefile</span><span class="p">(</span><span class="n">FORTRAN_STDOUT_LUN</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_lun</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">record</span><span class="o">.</span><span class="n">_ipack</span><span class="p">)</span>
</span><span id="open.write-737"><a href="#open.write-737"><span class="linenos">737</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_type_lastrecord_written</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">type</span>
</span><span id="open.write-738"><a href="#open.write-738"><span class="linenos">738</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">records</span> <span class="o">+=</span> <span class="mi">1</span>
</span></pre></div>


    

                            </div>
                            <div id="open.close" class="classattr">
                                        <input id="open.close-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">close</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="open.close-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#open.close"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="open.close-740"><a href="#open.close-740"><span class="linenos">740</span></a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="open.close-741"><a href="#open.close-741"><span class="linenos">741</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="open.close-742"><a href="#open.close-742"><span class="linenos">742</span></a><span class="sd">        Close the file handle</span>
</span><span id="open.close-743"><a href="#open.close-743"><span class="linenos">743</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="open.close-744"><a href="#open.close-744"><span class="linenos">744</span></a>        <span class="k">if</span> <span class="s1">&#39;w&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">:</span>
</span><span id="open.close-745"><a href="#open.close-745"><span class="linenos">745</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">filetype</span> <span class="o">==</span> <span class="s1">&#39;sequential&#39;</span><span class="p">:</span>
</span><span id="open.close-746"><a href="#open.close-746"><span class="linenos">746</span></a>                <span class="n">filetype</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="open.close-747"><a href="#open.close-747"><span class="linenos">747</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_lastrecord_written</span> <span class="o">==</span> <span class="s1">&#39;vector&#39;</span><span class="p">:</span>
</span><span id="open.close-748"><a href="#open.close-748"><span class="linenos">748</span></a>                    <span class="n">ier</span> <span class="o">=</span> <span class="n">tdlpacklib</span><span class="o">.</span><span class="n">trail</span><span class="p">(</span><span class="n">FORTRAN_STDOUT_LUN</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_lun</span><span class="p">,</span><span class="n">L3264B</span><span class="p">,</span><span class="n">L3264W</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">bytes_written</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">records_written</span><span class="p">)</span>
</span><span id="open.close-749"><a href="#open.close-749"><span class="linenos">749</span></a>            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">filetype</span> <span class="o">==</span> <span class="s1">&#39;random-access&#39;</span><span class="p">:</span>
</span><span id="open.close-750"><a href="#open.close-750"><span class="linenos">750</span></a>                <span class="n">filetype</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="open.close-751"><a href="#open.close-751"><span class="linenos">751</span></a>            <span class="n">ier</span> <span class="o">=</span> <span class="n">tdlpacklib</span><span class="o">.</span><span class="n">closefile</span><span class="p">(</span><span class="n">FORTRAN_STDOUT_LUN</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_lun</span><span class="p">,</span><span class="n">filetype</span><span class="p">)</span>
</span><span id="open.close-752"><a href="#open.close-752"><span class="linenos">752</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;_filehandle&#39;</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filehandle</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="open.close-753"><a href="#open.close-753"><span class="linenos">753</span></a>        <span class="k">del</span> <span class="n">_open_file_store</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Close the file handle</p>
</div>


                            </div>
                            <div id="open.select" class="classattr">
                                        <input id="open.select-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">select</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="open.select-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#open.select"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="open.select-755"><a href="#open.select-755"><span class="linenos">755</span></a>    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="open.select-756"><a href="#open.select-756"><span class="linenos">756</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="open.select-757"><a href="#open.select-757"><span class="linenos">757</span></a><span class="sd">        Select TDLPACK records by `TdlpackRecord` attributes.</span>
</span><span id="open.select-758"><a href="#open.select-758"><span class="linenos">758</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="open.select-759"><a href="#open.select-759"><span class="linenos">759</span></a>        <span class="c1"># TODO: Added ability to process multiple values for each keyword (attribute)</span>
</span><span id="open.select-760"><a href="#open.select-760"><span class="linenos">760</span></a>        <span class="n">idxs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="open.select-761"><a href="#open.select-761"><span class="linenos">761</span></a>        <span class="n">nkeys</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="open.select-762"><a href="#open.select-762"><span class="linenos">762</span></a>        <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="open.select-763"><a href="#open.select-763"><span class="linenos">763</span></a>            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;record&#39;</span><span class="p">]:</span>
</span><span id="open.select-764"><a href="#open.select-764"><span class="linenos">764</span></a>                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="n">k</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="n">k</span><span class="p">)</span> <span class="o">==</span> <span class="n">v</span><span class="p">:</span> <span class="n">idxs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">_recnum</span><span class="p">)</span>
</span><span id="open.select-765"><a href="#open.select-765"><span class="linenos">765</span></a>        <span class="n">idxs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">idxs</span><span class="p">,</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;&gt;i4&#39;</span><span class="p">)</span>
</span><span id="open.select-766"><a href="#open.select-766"><span class="linenos">766</span></a>        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="s1">&#39;record&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="n">ii</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">collections</span><span class="o">.</span><span class="n">Counter</span><span class="p">(</span><span class="n">idxs</span><span class="p">)</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span> <span class="k">if</span> <span class="n">ii</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">nkeys</span><span class="p">]]</span>
</span></pre></div>


            <div class="docstring"><p>Select TDLPACK records by <code><a href="#TdlpackRecord">TdlpackRecord</a></code> attributes.</p>
</div>


                            </div>
                </section>
                <section id="TdlpackRecord">
                            <input id="TdlpackRecord-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">TdlpackRecord</span>:

                <label class="view-source-button" for="TdlpackRecord-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TdlpackRecord"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TdlpackRecord-769"><a href="#TdlpackRecord-769"><span class="linenos">769</span></a><span class="k">class</span> <span class="nc">TdlpackRecord</span><span class="p">:</span>
</span><span id="TdlpackRecord-770"><a href="#TdlpackRecord-770"><span class="linenos">770</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TdlpackRecord-771"><a href="#TdlpackRecord-771"><span class="linenos">771</span></a><span class="sd">    Creation class for TDLPACK Record.</span>
</span><span id="TdlpackRecord-772"><a href="#TdlpackRecord-772"><span class="linenos">772</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="TdlpackRecord-773"><a href="#TdlpackRecord-773"><span class="linenos">773</span></a>    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is0</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">ND7</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">),</span>
</span><span id="TdlpackRecord-774"><a href="#TdlpackRecord-774"><span class="linenos">774</span></a>                      <span class="n">is1</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">ND7</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">),</span>
</span><span id="TdlpackRecord-775"><a href="#TdlpackRecord-775"><span class="linenos">775</span></a>                      <span class="n">is2</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="c1">#np.zeros((ND7),dtype=np.int32),</span>
</span><span id="TdlpackRecord-776"><a href="#TdlpackRecord-776"><span class="linenos">776</span></a>                      <span class="n">is4</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">ND7</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">),</span>
</span><span id="TdlpackRecord-777"><a href="#TdlpackRecord-777"><span class="linenos">777</span></a>                      <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="TdlpackRecord-778"><a href="#TdlpackRecord-778"><span class="linenos">778</span></a>
</span><span id="TdlpackRecord-779"><a href="#TdlpackRecord-779"><span class="linenos">779</span></a>        <span class="n">bases</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
</span><span id="TdlpackRecord-780"><a href="#TdlpackRecord-780"><span class="linenos">780</span></a>        <span class="k">if</span> <span class="n">is2</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="TdlpackRecord-781"><a href="#TdlpackRecord-781"><span class="linenos">781</span></a>            <span class="n">rectype</span> <span class="o">=</span> <span class="s1">&#39;vector&#39;</span>
</span><span id="TdlpackRecord-782"><a href="#TdlpackRecord-782"><span class="linenos">782</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="TdlpackRecord-783"><a href="#TdlpackRecord-783"><span class="linenos">783</span></a>            <span class="n">bases</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">templates</span><span class="o">.</span><span class="n">GridDefinitionSection</span><span class="p">)</span>
</span><span id="TdlpackRecord-784"><a href="#TdlpackRecord-784"><span class="linenos">784</span></a>            <span class="n">rectype</span> <span class="o">=</span> <span class="s1">&#39;grid&#39;</span>
</span><span id="TdlpackRecord-785"><a href="#TdlpackRecord-785"><span class="linenos">785</span></a>
</span><span id="TdlpackRecord-786"><a href="#TdlpackRecord-786"><span class="linenos">786</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="TdlpackRecord-787"><a href="#TdlpackRecord-787"><span class="linenos">787</span></a>            <span class="n">Record</span> <span class="o">=</span> <span class="n">_record_class_store</span><span class="p">[</span><span class="s1">&#39;rectype&#39;</span><span class="p">]</span>
</span><span id="TdlpackRecord-788"><a href="#TdlpackRecord-788"><span class="linenos">788</span></a>        <span class="k">except</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">):</span>
</span><span id="TdlpackRecord-789"><a href="#TdlpackRecord-789"><span class="linenos">789</span></a>            <span class="nd">@dataclass</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="TdlpackRecord-790"><a href="#TdlpackRecord-790"><span class="linenos">790</span></a>            <span class="k">class</span> <span class="nc">Record</span><span class="p">(</span><span class="n">_TdlpackRecord</span><span class="p">,</span> <span class="o">*</span><span class="n">bases</span><span class="p">):</span>
</span><span id="TdlpackRecord-791"><a href="#TdlpackRecord-791"><span class="linenos">791</span></a>                <span class="k">pass</span>
</span><span id="TdlpackRecord-792"><a href="#TdlpackRecord-792"><span class="linenos">792</span></a>            <span class="n">_record_class_store</span><span class="p">[</span><span class="s1">&#39;rectype&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Record</span>
</span><span id="TdlpackRecord-793"><a href="#TdlpackRecord-793"><span class="linenos">793</span></a>
</span><span id="TdlpackRecord-794"><a href="#TdlpackRecord-794"><span class="linenos">794</span></a>        <span class="c1"># For new record, set section flags</span>
</span><span id="TdlpackRecord-795"><a href="#TdlpackRecord-795"><span class="linenos">795</span></a>        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">is1</span><span class="o">==</span><span class="mi">0</span><span class="p">):</span>
</span><span id="TdlpackRecord-796"><a href="#TdlpackRecord-796"><span class="linenos">796</span></a>            <span class="n">is1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">rectype</span> <span class="o">==</span> <span class="s1">&#39;grid&#39;</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="TdlpackRecord-797"><a href="#TdlpackRecord-797"><span class="linenos">797</span></a>
</span><span id="TdlpackRecord-798"><a href="#TdlpackRecord-798"><span class="linenos">798</span></a>        <span class="c1"># For new record, make sure the reference date is present</span>
</span><span id="TdlpackRecord-799"><a href="#TdlpackRecord-799"><span class="linenos">799</span></a>        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">is1</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">):</span>
</span><span id="TdlpackRecord-800"><a href="#TdlpackRecord-800"><span class="linenos">800</span></a>            <span class="n">d</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="TdlpackRecord-801"><a href="#TdlpackRecord-801"><span class="linenos">801</span></a>            <span class="n">is1</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()[:</span><span class="mi">5</span><span class="p">]</span>
</span><span id="TdlpackRecord-802"><a href="#TdlpackRecord-802"><span class="linenos">802</span></a>            <span class="n">is1</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">templates</span><span class="o">.</span><span class="n">DATE_FORMAT</span><span class="p">))</span>
</span><span id="TdlpackRecord-803"><a href="#TdlpackRecord-803"><span class="linenos">803</span></a>
</span><span id="TdlpackRecord-804"><a href="#TdlpackRecord-804"><span class="linenos">804</span></a>        <span class="k">return</span> <span class="n">Record</span><span class="p">(</span><span class="n">is0</span><span class="p">,</span> <span class="n">is1</span><span class="p">,</span> <span class="n">is2</span><span class="p">,</span> <span class="n">is4</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Creation class for TDLPACK Record.</p>
</div>


                </section>
                <section id="TdlpackStationRecord">
                            <input id="TdlpackStationRecord-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">TdlpackStationRecord</span>:

                <label class="view-source-button" for="TdlpackStationRecord-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TdlpackStationRecord"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TdlpackStationRecord-1072"><a href="#TdlpackStationRecord-1072"><span class="linenos">1072</span></a><span class="nd">@dataclass</span>
</span><span id="TdlpackStationRecord-1073"><a href="#TdlpackStationRecord-1073"><span class="linenos">1073</span></a><span class="k">class</span> <span class="nc">TdlpackStationRecord</span><span class="p">:</span>
</span><span id="TdlpackStationRecord-1074"><a href="#TdlpackStationRecord-1074"><span class="linenos">1074</span></a>    <span class="n">stations</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="n">templates</span><span class="o">.</span><span class="n">Stations</span><span class="p">())</span>
</span><span id="TdlpackStationRecord-1075"><a href="#TdlpackStationRecord-1075"><span class="linenos">1075</span></a>    <span class="n">numberOfStations</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="n">templates</span><span class="o">.</span><span class="n">NumberOfStations</span><span class="p">())</span>
</span><span id="TdlpackStationRecord-1076"><a href="#TdlpackStationRecord-1076"><span class="linenos">1076</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;station&#39;</span><span class="p">)</span>
</span><span id="TdlpackStationRecord-1077"><a href="#TdlpackStationRecord-1077"><span class="linenos">1077</span></a>
</span><span id="TdlpackStationRecord-1078"><a href="#TdlpackStationRecord-1078"><span class="linenos">1078</span></a>    <span class="n">_stations</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="TdlpackStationRecord-1079"><a href="#TdlpackStationRecord-1079"><span class="linenos">1079</span></a>    <span class="n">_numberOfStations</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="TdlpackStationRecord-1080"><a href="#TdlpackStationRecord-1080"><span class="linenos">1080</span></a>
</span><span id="TdlpackStationRecord-1081"><a href="#TdlpackStationRecord-1081"><span class="linenos">1081</span></a>    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="TdlpackStationRecord-1082"><a href="#TdlpackStationRecord-1082"><span class="linenos">1082</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="p">[</span><span class="mi">400001000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="TdlpackStationRecord-1083"><a href="#TdlpackStationRecord-1083"><span class="linenos">1083</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="s1">&#39;station&#39;</span>
</span><span id="TdlpackStationRecord-1084"><a href="#TdlpackStationRecord-1084"><span class="linenos">1084</span></a>
</span><span id="TdlpackStationRecord-1085"><a href="#TdlpackStationRecord-1085"><span class="linenos">1085</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="TdlpackStationRecord-1086"><a href="#TdlpackStationRecord-1086"><span class="linenos">1086</span></a>        <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_recnum</span><span class="si">}</span><span class="s1">:d=0000000000:&#39;</span>
</span><span id="TdlpackStationRecord-1087"><a href="#TdlpackStationRecord-1087"><span class="linenos">1087</span></a>                <span class="sa">f</span><span class="s1">&#39;STATION CALL LETTER RECORD:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">numberOfStations</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="TdlpackStationRecord-1088"><a href="#TdlpackStationRecord-1088"><span class="linenos">1088</span></a>
</span><span id="TdlpackStationRecord-1089"><a href="#TdlpackStationRecord-1089"><span class="linenos">1089</span></a>    <span class="k">def</span> <span class="nf">pack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="TdlpackStationRecord-1090"><a href="#TdlpackStationRecord-1090"><span class="linenos">1090</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TdlpackStationRecord-1091"><a href="#TdlpackStationRecord-1091"><span class="linenos">1091</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TdlpackStationRecord-1092"><a href="#TdlpackStationRecord-1092"><span class="linenos">1092</span></a>        <span class="k">pass</span>
</span><span id="TdlpackStationRecord-1093"><a href="#TdlpackStationRecord-1093"><span class="linenos">1093</span></a>
</span><span id="TdlpackStationRecord-1094"><a href="#TdlpackStationRecord-1094"><span class="linenos">1094</span></a>    <span class="k">def</span> <span class="nf">unpack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="TdlpackStationRecord-1095"><a href="#TdlpackStationRecord-1095"><span class="linenos">1095</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TdlpackStationRecord-1096"><a href="#TdlpackStationRecord-1096"><span class="linenos">1096</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TdlpackStationRecord-1097"><a href="#TdlpackStationRecord-1097"><span class="linenos">1097</span></a>        <span class="k">pass</span>
</span></pre></div>


    

                            <div id="TdlpackStationRecord.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">TdlpackStationRecord</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">_stations</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span>, </span><span class="param"><span class="n">_numberOfStations</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#TdlpackStationRecord.__init__"></a>
    
    

                            </div>
                            <div id="TdlpackStationRecord.stations" class="classattr">
                                <div class="attr variable">
            <span class="name">stations</span><span class="annotation">: list</span>

        
    </div>
    <a class="headerlink" href="#TdlpackStationRecord.stations"></a>
    
    

                            </div>
                            <div id="TdlpackStationRecord.numberOfStations" class="classattr">
                                <div class="attr variable">
            <span class="name">numberOfStations</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#TdlpackStationRecord.numberOfStations"></a>
    
    

                            </div>
                            <div id="TdlpackStationRecord.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>        =
<span class="default_value">&#39;station&#39;</span>

        
    </div>
    <a class="headerlink" href="#TdlpackStationRecord.type"></a>
    
    

                            </div>
                            <div id="TdlpackStationRecord.pack" class="classattr">
                                        <input id="TdlpackStationRecord.pack-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pack</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="TdlpackStationRecord.pack-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TdlpackStationRecord.pack"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TdlpackStationRecord.pack-1089"><a href="#TdlpackStationRecord.pack-1089"><span class="linenos">1089</span></a>    <span class="k">def</span> <span class="nf">pack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="TdlpackStationRecord.pack-1090"><a href="#TdlpackStationRecord.pack-1090"><span class="linenos">1090</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TdlpackStationRecord.pack-1091"><a href="#TdlpackStationRecord.pack-1091"><span class="linenos">1091</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TdlpackStationRecord.pack-1092"><a href="#TdlpackStationRecord.pack-1092"><span class="linenos">1092</span></a>        <span class="k">pass</span>
</span></pre></div>


    

                            </div>
                            <div id="TdlpackStationRecord.unpack" class="classattr">
                                        <input id="TdlpackStationRecord.unpack-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">unpack</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="TdlpackStationRecord.unpack-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TdlpackStationRecord.unpack"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TdlpackStationRecord.unpack-1094"><a href="#TdlpackStationRecord.unpack-1094"><span class="linenos">1094</span></a>    <span class="k">def</span> <span class="nf">unpack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="TdlpackStationRecord.unpack-1095"><a href="#TdlpackStationRecord.unpack-1095"><span class="linenos">1095</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="TdlpackStationRecord.unpack-1096"><a href="#TdlpackStationRecord.unpack-1096"><span class="linenos">1096</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="TdlpackStationRecord.unpack-1097"><a href="#TdlpackStationRecord.unpack-1097"><span class="linenos">1097</span></a>        <span class="k">pass</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="TdlpackTrailerRecord">
                            <input id="TdlpackTrailerRecord-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">TdlpackTrailerRecord</span>:

                <label class="view-source-button" for="TdlpackTrailerRecord-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TdlpackTrailerRecord"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TdlpackTrailerRecord-1100"><a href="#TdlpackTrailerRecord-1100"><span class="linenos">1100</span></a><span class="nd">@dataclass</span>
</span><span id="TdlpackTrailerRecord-1101"><a href="#TdlpackTrailerRecord-1101"><span class="linenos">1101</span></a><span class="k">class</span> <span class="nc">TdlpackTrailerRecord</span><span class="p">:</span>
</span><span id="TdlpackTrailerRecord-1102"><a href="#TdlpackTrailerRecord-1102"><span class="linenos">1102</span></a>    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;trailer&#39;</span><span class="p">)</span>
</span><span id="TdlpackTrailerRecord-1103"><a href="#TdlpackTrailerRecord-1103"><span class="linenos">1103</span></a>
</span><span id="TdlpackTrailerRecord-1104"><a href="#TdlpackTrailerRecord-1104"><span class="linenos">1104</span></a>    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="TdlpackTrailerRecord-1105"><a href="#TdlpackTrailerRecord-1105"><span class="linenos">1105</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="s1">&#39;trailer&#39;</span>
</span><span id="TdlpackTrailerRecord-1106"><a href="#TdlpackTrailerRecord-1106"><span class="linenos">1106</span></a>
</span><span id="TdlpackTrailerRecord-1107"><a href="#TdlpackTrailerRecord-1107"><span class="linenos">1107</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="TdlpackTrailerRecord-1108"><a href="#TdlpackTrailerRecord-1108"><span class="linenos">1108</span></a>        <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_recnum</span><span class="si">}</span><span class="s1">:d=0000000000:TRAILER RECORD&#39;</span><span class="p">)</span>
</span><span id="TdlpackTrailerRecord-1109"><a href="#TdlpackTrailerRecord-1109"><span class="linenos">1109</span></a>
</span><span id="TdlpackTrailerRecord-1110"><a href="#TdlpackTrailerRecord-1110"><span class="linenos">1110</span></a>    <span class="k">def</span> <span class="nf">pack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="TdlpackTrailerRecord-1111"><a href="#TdlpackTrailerRecord-1111"><span class="linenos">1111</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ipack</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">9999</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
</span><span id="TdlpackTrailerRecord-1112"><a href="#TdlpackTrailerRecord-1112"><span class="linenos">1112</span></a>
</span><span id="TdlpackTrailerRecord-1113"><a href="#TdlpackTrailerRecord-1113"><span class="linenos">1113</span></a>    <span class="k">def</span> <span class="nf">unpack</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">record</span><span class="p">):</span>
</span><span id="TdlpackTrailerRecord-1114"><a href="#TdlpackTrailerRecord-1114"><span class="linenos">1114</span></a>        <span class="k">pass</span>
</span></pre></div>


    

                            <div id="TdlpackTrailerRecord.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span><span class="annotation">: str</span>        =
<span class="default_value">&#39;trailer&#39;</span>

        
    </div>
    <a class="headerlink" href="#TdlpackTrailerRecord.type"></a>
    
    

                            </div>
                            <div id="TdlpackTrailerRecord.pack" class="classattr">
                                        <input id="TdlpackTrailerRecord.pack-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pack</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="TdlpackTrailerRecord.pack-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TdlpackTrailerRecord.pack"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TdlpackTrailerRecord.pack-1110"><a href="#TdlpackTrailerRecord.pack-1110"><span class="linenos">1110</span></a>    <span class="k">def</span> <span class="nf">pack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="TdlpackTrailerRecord.pack-1111"><a href="#TdlpackTrailerRecord.pack-1111"><span class="linenos">1111</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ipack</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">9999</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="TdlpackTrailerRecord.unpack" class="classattr">
                                        <input id="TdlpackTrailerRecord.unpack-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">unpack</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">record</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="TdlpackTrailerRecord.unpack-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TdlpackTrailerRecord.unpack"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TdlpackTrailerRecord.unpack-1113"><a href="#TdlpackTrailerRecord.unpack-1113"><span class="linenos">1113</span></a>    <span class="k">def</span> <span class="nf">unpack</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">record</span><span class="p">):</span>
</span><span id="TdlpackTrailerRecord.unpack-1114"><a href="#TdlpackTrailerRecord.unpack-1114"><span class="linenos">1114</span></a>        <span class="k">pass</span>
</span></pre></div>


    

                            </div>
                </section>
    </main>
</body>
</html>